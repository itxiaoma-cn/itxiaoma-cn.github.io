<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>01TS核心概念 | IT小马</title>
  <meta name="keywords" content=" 前端 , Nest ">
  <meta name="description" content="01TS核心概念 | IT小马">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="description" content="00 基础原型链原型链是JavaScript中的一个重要概念，它描述了对象之间的继承关系。在JavaScript中，每个对象都有一个原型（prototype），并且可以通过原型链来访问和继承其他对象的属性和方法。 当我们访问一个对象的属性或方法时，如果该对象本身没有定义这个属性或方法，JavaScript会沿着原型链向上查找，直到找到对应的属性或方法或者到达原型链的顶端（即Object.proto">
<meta property="og:type" content="article">
<meta property="og:title" content="01TS核心概念">
<meta property="og:url" content="https://blog.itxiaoma.cn/2023/08/01/Nest01/index.html">
<meta property="og:site_name" content="IT小马">
<meta property="og:description" content="00 基础原型链原型链是JavaScript中的一个重要概念，它描述了对象之间的继承关系。在JavaScript中，每个对象都有一个原型（prototype），并且可以通过原型链来访问和继承其他对象的属性和方法。 当我们访问一个对象的属性或方法时，如果该对象本身没有定义这个属性或方法，JavaScript会沿着原型链向上查找，直到找到对应的属性或方法或者到达原型链的顶端（即Object.proto">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2023-07-31T16:00:00.000Z">
<meta property="article:modified_time" content="2023-07-21T07:01:51.104Z">
<meta property="article:author" content="IT小马">
<meta property="article:tag" content="前端">
<meta property="article:tag" content="Nest">
<meta name="twitter:card" content="summary">


<link rel="icon" href="/img/avatar.jpg">

<link href="/css/style.css?v=1.1.0" rel="stylesheet">

<link href="/css/hl_theme/atom-light.css?v=1.1.0" rel="stylesheet">

<link href="//cdn.jsdelivr.net/npm/animate.css@4.1.0/animate.min.css" rel="stylesheet">

<script src="//cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
<script src="/js/titleTip.js?v=1.1.0" ></script>

<script src="//cdn.jsdelivr.net/npm/highlightjs@9.16.2/highlight.pack.min.js"></script>
<script>
    hljs.initHighlightingOnLoad();
</script>

<script src="//cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js"></script>



<script src="//cdn.jsdelivr.net/npm/jquery.cookie@1.4.1/jquery.cookie.min.js" ></script>

<script src="/js/iconfont.js?v=1.1.0" ></script>

<meta name="generator" content="Hexo 5.0.0"></head>
<div style="display: none">
  <input class="theme_disqus_on" value="false">
  <input class="theme_preload_comment" value="">
  <input class="theme_blog_path" value="">
  <input id="theme_shortcut" value="true" />
  <input id="theme_highlight_on" value="true" />
  <input id="theme_code_copy" value="true" />
</div>



<body>
<aside class="nav">
    <div class="nav-left">
        <a href="/"
   class="avatar_target">
    <img class="avatar"
         src="/img/avatar.jpg"/>
</a>
<div class="author">
    <span>IT小马</span>
</div>

<div class="icon">
    
        
            <a title="rss"
               href="/atom.xml"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-rss"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="github"
               href="https://github.com/yelog"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-github"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="facebook"
               href="https://www.facebook.com/faker.tops"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-facebook"></use>
                    </svg>
                
            </a>
        
    
        
    
        
    
        
            <a title="instagram"
               href="https://www.facebook.com/faker.tops"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-instagram"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="reddit"
               href="https://www.reddit.com/user/yelog/"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-reddit"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="weibo"
               href="http://weibo.com/u/2307534817"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-weibo"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="jianshu"
               href="https://www.jianshu.com/u/ff56736de7cf"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-jianshu"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="zhihu"
               href="https://www.zhihu.com/people/jaytp/activities"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-zhihu"></use>
                    </svg>
                
            </a>
        
    
        
    
        
            <a title="oschina"
               href="https://my.oschina.net/yelog"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-oschina"></use>
                    </svg>
                
            </a>
        
    
        
    
        
            <a title="email"
               href="mailto:jaytp@qq.com"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-email"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="qq"
               href="http://wpa.qq.com/msgrd?v=3&uin=872336115&site=qq&menu=yes"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-qq"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="kugou"
               href="https://www.kugou.com/"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-kugou"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="neteasemusic"
               href="https://music.163.com/#/user/home?id=88151013"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-neteasemusic"></use>
                    </svg>
                
            </a>
        
    
</div>





<ul>
    <li>
        <div class="all active" data-rel="全部文章">全部文章
            
                <small>(153)</small>
            
        </div>
    </li>
    
        
            
                
    <li>
        <div data-rel="运维">
            
            运维
            <small>(4)</small>
        </div>
        
    </li>

            
        
    
        
            
        
    
        
            
                
    <li>
        <div data-rel="面试">
            
            面试
            <small>(10)</small>
        </div>
        
    </li>

            
        
    
        
            
                
    <li>
        <div data-rel="前端">
            <i class="fold iconfont icon-right"></i>
            前端
            <small>(16)</small>
        </div>
        
            <ul class="sub hide">
                
                    
    <li>
        <div data-rel="前端&lt;---&gt;CSS">
            
            CSS
            <small>(2)</small>
        </div>
        
    </li>

                
                    
    <li>
        <div data-rel="前端&lt;---&gt;ES6">
            
            ES6
            <small>(3)</small>
        </div>
        
    </li>

                
                    
    <li>
        <div data-rel="前端&lt;---&gt;HTML">
            
            HTML
            <small>(4)</small>
        </div>
        
    </li>

                
                    
    <li>
        <div data-rel="前端&lt;---&gt;JS">
            
            JS
            <small>(2)</small>
        </div>
        
    </li>

                
                    
    <li>
        <div data-rel="前端&lt;---&gt;Nest">
            
            Nest
            <small>(2)</small>
        </div>
        
    </li>

                
                    
    <li>
        <div data-rel="前端&lt;---&gt;Vue">
            
            Vue
            <small>(3)</small>
        </div>
        
    </li>

                
            </ul>
        
    </li>

            
        
    
        
            
                
    <li>
        <div data-rel="英语">
            <i class="fold iconfont icon-right"></i>
            英语
            <small>(2)</small>
        </div>
        
            <ul class="sub hide">
                
                    
    <li>
        <div data-rel="英语&lt;---&gt;语法">
            
            语法
            <small>(2)</small>
        </div>
        
    </li>

                
            </ul>
        
    </li>

            
        
    
        
            
                
    <li>
        <div data-rel="游戏">
            
            游戏
            <small>(3)</small>
        </div>
        
    </li>

            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
                
    <li>
        <div data-rel="DOCKER">
            
            DOCKER
            <small>(8)</small>
        </div>
        
    </li>

            
        
    
        
            
        
    
        
            
                
    <li>
        <div data-rel="GO">
            
            GO
            <small>(30)</small>
        </div>
        
    </li>

            
        
    
        
            
        
    
        
            
                
    <li>
        <div data-rel="JAVA">
            
            JAVA
            <small>(5)</small>
        </div>
        
    </li>

            
        
    
        
            
        
    
        
            
        
    
        
            
                
    <li>
        <div data-rel="K8S">
            <i class="fold iconfont icon-right"></i>
            K8S
            <small>(31)</small>
        </div>
        
            <ul class="sub hide">
                
                    
    <li>
        <div data-rel="K8S&lt;---&gt;K3S">
            
            K3S
            <small>(3)</small>
        </div>
        
    </li>

                
                    
    <li>
        <div data-rel="K8S&lt;---&gt;K8S基础">
            
            K8S基础
            <small>(11)</small>
        </div>
        
    </li>

                
                    
    <li>
        <div data-rel="K8S&lt;---&gt;K8S架构师">
            
            K8S架构师
            <small>(15)</small>
        </div>
        
    </li>

                
            </ul>
        
    </li>

            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
                
    <li>
        <div data-rel="MYSQL">
            
            MYSQL
            <small>(11)</small>
        </div>
        
    </li>

            
        
    
        
            
        
    
        
            
                
    <li>
        <div data-rel="PHP">
            <i class="fold iconfont icon-right"></i>
            PHP
            <small>(12)</small>
        </div>
        
            <ul class="sub hide">
                
                    
    <li>
        <div data-rel="PHP&lt;---&gt;基础">
            
            基础
            <small>(1)</small>
        </div>
        
    </li>

                
                    
    <li>
        <div data-rel="PHP&lt;---&gt;中间件">
            
            中间件
            <small>(2)</small>
        </div>
        
    </li>

                
                    
    <li>
        <div data-rel="PHP&lt;---&gt;Laravel">
            
            Laravel
            <small>(5)</small>
        </div>
        
    </li>

                
                    
    <li>
        <div data-rel="PHP&lt;---&gt;Symfony">
            
            Symfony
            <small>(4)</small>
        </div>
        
    </li>

                
            </ul>
        
    </li>

            
        
    
        
            
                
    <li>
        <div data-rel="REDIS">
            
            REDIS
            <small>(18)</small>
        </div>
        
    </li>

            
        
    
        
            
        
    
        
            
        
    
        
            
                
    <li>
        <div data-rel="WEB">
            
            WEB
            <small>(3)</small>
        </div>
        
    </li>

            
        
    
</ul>
<div class="left-bottom">
    <div class="menus">
        
            
            
            
    </div>
    <div>
        
            <a class="about  hasFriend  site_url"
               
               href="/about">关于</a>
        
        <a style="width: 50%"
                
                                           class="friends">友链</a>
        
    </div>
</div>
<input type="hidden" id="yelog_site_posts_number" value="153">

<div style="display: none">
    <span id="busuanzi_value_site_uv"></span>
    <span id="busuanzi_value_site_pv"></span>
</div>

    </div>
    <div class="nav-right">
        <div class="friends-area">
    <div class="friends-title">
        友情链接
        <i class="iconfont icon-left"></i>
    </div>
    <div class="friends-content">
        <ul>
            
            <li><a target="_blank" href="http://yelog.org/">叶落阁</a></li>
            
        </ul>
    </div>
</div>
        <div class="title-list">
    <div class="right-top">
        <div id="default-panel">
            <i class="iconfont icon-search" data-title="搜索 快捷键 i"></i>
            <div class="right-title">全部文章</div>
            <i class="iconfont icon-file-tree" data-title="切换到大纲视图 快捷键 w"></i>
        </div>
        <div id="search-panel">
            <i class="iconfont icon-left" data-title="返回"></i>
            <input id="local-search-input" autocomplete="off"/>
            <label class="border-line" for="input"></label>
            <i class="iconfont icon-case-sensitive" data-title="大小写敏感"></i>
            <i class="iconfont icon-tag" data-title="标签"></i>
        </div>
        <div id="outline-panel" style="display: none">
            <div class="right-title">大纲</div>
            <i class="iconfont icon-list" data-title="切换到文章列表"></i>
        </div>
    </div>

    <div class="tags-list">
    <input id="tag-search" />
    <div class="tag-wrapper">
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>后端</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>面试</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>前端</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>容器</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>学习笔记</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>英语</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>游戏</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>语法</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>运维</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>CKA</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Cocos</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>CSS</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Docker</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>DOCKER</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>ELK</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>ES6</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>GO</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>GOPL</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>HTML</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Java</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>JavaScript</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Jmeter</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>JS</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>K3S</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>K8S</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Laravel</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Mysql</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>MYSQL</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Nest</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>PHP</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>RabbitMQ</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>REDIS</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Swoole</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Symfony</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>WEB</a>
            </li>
        
    </div>

</div>

    
    <nav id="title-list-nav">
        
        
        <a  class="全部文章 前端 Nest "
           href="/2023/08/02/Nest02/"
           data-tag="前端,Nest"
           data-author="" >
            <span class="post-title" title="02CURD操作及分页">02CURD操作及分页</span>
            <span class="post-date" title="2023-08-02 00:00:00">2023/08/02</span>
        </a>
        
        
        <a  class="全部文章 前端 Nest "
           href="/2023/08/01/Nest01/"
           data-tag="前端,Nest"
           data-author="" >
            <span class="post-title" title="01TS核心概念">01TS核心概念</span>
            <span class="post-date" title="2023-08-01 00:00:00">2023/08/01</span>
        </a>
        
        
        <a  class="全部文章 PHP Symfony "
           href="/2023/07/04/Symfony04/"
           data-tag="PHP,Symfony"
           data-author="" >
            <span class="post-title" title="Symfony04">Symfony04</span>
            <span class="post-date" title="2023-07-04 00:00:00">2023/07/04</span>
        </a>
        
        
        <a  class="全部文章 PHP Symfony "
           href="/2023/07/03/Symfony03/"
           data-tag="PHP,Symfony"
           data-author="" >
            <span class="post-title" title="Symfony03">Symfony03</span>
            <span class="post-date" title="2023-07-03 00:00:00">2023/07/03</span>
        </a>
        
        
        <a  class="全部文章 PHP Symfony "
           href="/2023/07/02/Symfony02/"
           data-tag="PHP,Symfony"
           data-author="" >
            <span class="post-title" title="Symfony02">Symfony02</span>
            <span class="post-date" title="2023-07-02 00:00:00">2023/07/02</span>
        </a>
        
        
        <a  class="全部文章 PHP Symfony "
           href="/2023/07/01/Symfony01/"
           data-tag="PHP,Symfony"
           data-author="" >
            <span class="post-title" title="Symfony01">Symfony01</span>
            <span class="post-date" title="2023-07-01 00:00:00">2023/07/01</span>
        </a>
        
        
        <a  class="全部文章 英语 语法 "
           href="/2023/07/01/%E8%8B%B1%E8%AF%AD%E8%AF%AD%E6%B3%9501%E6%A1%86%E6%9E%B6/"
           data-tag="英语,语法"
           data-author="" >
            <span class="post-title" title="01语法框架">01语法框架</span>
            <span class="post-date" title="2023-07-01 00:00:00">2023/07/01</span>
        </a>
        
        
        <a  class="全部文章 面试 "
           href="/2023/06/03/Go%E5%AE%9E%E6%88%9803/"
           data-tag="GO,面试"
           data-author="" >
            <span class="post-title" title="Go面试题03-实战">Go面试题03-实战</span>
            <span class="post-date" title="2023-06-03 00:00:00">2023/06/03</span>
        </a>
        
        
        <a  class="全部文章 面试 "
           href="/2023/06/02/Go%E5%AE%9E%E6%88%9802/"
           data-tag="GO,面试"
           data-author="" >
            <span class="post-title" title="Go面试题02-进阶">Go面试题02-进阶</span>
            <span class="post-date" title="2023-06-02 00:00:00">2023/06/02</span>
        </a>
        
        
        <a  class="全部文章 面试 "
           href="/2023/06/01/Go%E5%AE%9E%E6%88%9801/"
           data-tag="GO,面试"
           data-author="" >
            <span class="post-title" title="Go面试题01-基础">Go面试题01-基础</span>
            <span class="post-date" title="2023-06-01 00:00:00">2023/06/01</span>
        </a>
        
        
        <a  class="全部文章 运维 "
           href="/2023/05/03/ElasticSearh03%E6%A6%82%E5%BF%B5/"
           data-tag="后端,ELK"
           data-author="" >
            <span class="post-title" title="ElasticSearh 03概念">ElasticSearh 03概念</span>
            <span class="post-date" title="2023-05-03 00:00:00">2023/05/03</span>
        </a>
        
        
        <a  class="全部文章 运维 "
           href="/2023/05/02/ElasticSearh02%E6%90%AD%E5%BB%BA/"
           data-tag="后端,ELK"
           data-author="" >
            <span class="post-title" title="ElasticSearh 02环境搭建">ElasticSearh 02环境搭建</span>
            <span class="post-date" title="2023-05-02 00:00:00">2023/05/02</span>
        </a>
        
        
        <a  class="全部文章 运维 "
           href="/2023/05/01/ElasticSearh01%E5%8E%9F%E7%90%86/"
           data-tag="后端,ELK"
           data-author="" >
            <span class="post-title" title="ElasticSearh 01原理">ElasticSearh 01原理</span>
            <span class="post-date" title="2023-05-01 00:00:00">2023/05/01</span>
        </a>
        
        
        <a  class="全部文章 K8S "
           href="/2023/01/01/CKA%E8%AE%A4%E8%AF%8101/"
           data-tag="K8S,CKA"
           data-author="" >
            <span class="post-title" title="CKA认证01">CKA认证01</span>
            <span class="post-date" title="2023-01-01 00:00:00">2023/01/01</span>
        </a>
        
        
        <a  class="全部文章 K8S K3S "
           href="/2022/12/04/K3S04-%E5%AE%89%E8%A3%85Mysql%E9%9B%86%E7%BE%A4/"
           data-tag="K8S,容器,K3S"
           data-author="" >
            <span class="post-title" title="K3S03-安装Mysql集群">K3S03-安装Mysql集群</span>
            <span class="post-date" title="2022-12-04 00:00:00">2022/12/04</span>
        </a>
        
        
        <a  class="全部文章 REDIS "
           href="/2022/12/04/Redis%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B031-38/"
           data-tag="后端,REDIS"
           data-author="" >
            <span class="post-title" title="Redis核心技术笔记31-38">Redis核心技术笔记31-38</span>
            <span class="post-date" title="2022-12-04 00:00:00">2022/12/04</span>
        </a>
        
        
        <a  class="全部文章 K8S K3S "
           href="/2022/12/03/K3S03-%E5%AE%89%E8%A3%85Rancher/"
           data-tag="K8S,容器,K3S"
           data-author="" >
            <span class="post-title" title="K3S03-安装Rancher">K3S03-安装Rancher</span>
            <span class="post-date" title="2022-12-03 00:00:00">2022/12/03</span>
        </a>
        
        
        <a  class="全部文章 REDIS "
           href="/2022/12/03/Redis%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B021-30/"
           data-tag="后端,REDIS"
           data-author="" >
            <span class="post-title" title="Redis核心技术笔记21-30">Redis核心技术笔记21-30</span>
            <span class="post-date" title="2022-12-03 00:00:00">2022/12/03</span>
        </a>
        
        
        <a  class="全部文章 K8S K3S "
           href="/2022/12/02/K3S02-%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/"
           data-tag="K8S,容器,K3S"
           data-author="" >
            <span class="post-title" title="K3S02-基础使用">K3S02-基础使用</span>
            <span class="post-date" title="2022-12-02 00:00:00">2022/12/02</span>
        </a>
        
        
        <a  class="全部文章 REDIS "
           href="/2022/12/02/Redis%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B011-20/"
           data-tag="后端,REDIS"
           data-author="" >
            <span class="post-title" title="Redis核心技术笔记11-20">Redis核心技术笔记11-20</span>
            <span class="post-date" title="2022-12-02 00:00:00">2022/12/02</span>
        </a>
        
        
        <a  class="全部文章 REDIS "
           href="/2022/12/01/Redis%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B001-10/"
           data-tag="后端,REDIS"
           data-author="" >
            <span class="post-title" title="Redis核心技术笔记01-10">Redis核心技术笔记01-10</span>
            <span class="post-date" title="2022-12-01 00:00:00">2022/12/01</span>
        </a>
        
        
        <a  class="全部文章 GO "
           href="/2022/11/09/Go%E7%AC%94%E8%AE%B001-Go%E5%9F%BA%E7%A1%80/"
           data-tag="GO,学习笔记"
           data-author="" >
            <span class="post-title" title="Go笔记01-Go基础">Go笔记01-Go基础</span>
            <span class="post-date" title="2022-11-09 00:00:00">2022/11/09</span>
        </a>
        
        
        <a  class="全部文章 PHP 中间件 "
           href="/2022/11/06/PHP-RabbitMQ-2%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7/"
           data-tag="PHP,RabbitMQ"
           data-author="" >
            <span class="post-title" title="PHP-RabbitMQ-2高级特性">PHP-RabbitMQ-2高级特性</span>
            <span class="post-date" title="2022-11-06 00:00:00">2022/11/06</span>
        </a>
        
        
        <a  class="全部文章 PHP 中间件 "
           href="/2022/11/05/PHP-RabbitMQ-1%E5%9F%BA%E7%A1%80/"
           data-tag="PHP,RabbitMQ"
           data-author="" >
            <span class="post-title" title="PHP-RabbitMQ-1基础">PHP-RabbitMQ-1基础</span>
            <span class="post-date" title="2022-11-05 00:00:00">2022/11/05</span>
        </a>
        
        
        <a  class="全部文章 运维 "
           href="/2022/10/22/Jmeter/"
           data-tag="运维,Jmeter"
           data-author="" >
            <span class="post-title" title="Jemter压测工具安装使用总结">Jemter压测工具安装使用总结</span>
            <span class="post-date" title="2022-10-22 00:00:00">2022/10/22</span>
        </a>
        
        
        <a  class="全部文章 游戏 "
           href="/2022/10/10/CocosCreator03/"
           data-tag="游戏,Cocos"
           data-author="" >
            <span class="post-title" title="CocosCreator03">CocosCreator03</span>
            <span class="post-date" title="2022-10-10 00:00:00">2022/10/10</span>
        </a>
        
        
        <a  class="全部文章 游戏 "
           href="/2022/10/06/CocosCreator02/"
           data-tag="游戏,Cocos"
           data-author="" >
            <span class="post-title" title="CocosCreator02">CocosCreator02</span>
            <span class="post-date" title="2022-10-06 00:00:00">2022/10/06</span>
        </a>
        
        
        <a  class="全部文章 游戏 "
           href="/2022/10/03/CocosCreator01/"
           data-tag="游戏,Cocos"
           data-author="" >
            <span class="post-title" title="CocosCreator01">CocosCreator01</span>
            <span class="post-date" title="2022-10-03 00:00:00">2022/10/03</span>
        </a>
        
        
        <a  class="全部文章 前端 Vue "
           href="/2022/08/13/Vuex/"
           data-tag="前端,CSS"
           data-author="" >
            <span class="post-title" title="Vuex">Vuex</span>
            <span class="post-date" title="2022-08-13 00:00:00">2022/08/13</span>
        </a>
        
        
        <a  class="全部文章 前端 Vue "
           href="/2022/08/12/VueCLI/"
           data-tag="前端,CSS"
           data-author="" >
            <span class="post-title" title="Vue CLI">Vue CLI</span>
            <span class="post-date" title="2022-08-12 00:00:00">2022/08/12</span>
        </a>
        
        
        <a  class="全部文章 前端 Vue "
           href="/2022/08/11/Vue-%E6%A0%B8%E5%BF%83/"
           data-tag="前端,CSS"
           data-author="" >
            <span class="post-title" title="Vue-核心">Vue-核心</span>
            <span class="post-date" title="2022-08-11 00:00:00">2022/08/11</span>
        </a>
        
        
        <a  class="全部文章 前端 ES6 "
           href="/2022/08/10/ECMAScript6(3)/"
           data-tag="前端,JS,ES6"
           data-author="" >
            <span class="post-title" title="ECMAScript6(3)">ECMAScript6(3)</span>
            <span class="post-date" title="2022-08-10 00:00:00">2022/08/10</span>
        </a>
        
        
        <a  class="全部文章 前端 ES6 "
           href="/2022/08/09/ECMAScript6(2)/"
           data-tag="前端,JS,ES6"
           data-author="" >
            <span class="post-title" title="ECMAScript6(2)">ECMAScript6(2)</span>
            <span class="post-date" title="2022-08-09 00:00:00">2022/08/09</span>
        </a>
        
        
        <a  class="全部文章 前端 ES6 "
           href="/2022/08/08/ECMAScript6(1)/"
           data-tag="前端,JS,ES6"
           data-author="" >
            <span class="post-title" title="ECMAScript6(1)">ECMAScript6(1)</span>
            <span class="post-date" title="2022-08-08 00:00:00">2022/08/08</span>
        </a>
        
        
        <a  class="全部文章 前端 JS "
           href="/2022/08/07/JavaScript%E5%9F%BA%E7%A1%801/"
           data-tag="前端,JavaScript"
           data-author="" >
            <span class="post-title" title="JavaScript基础1">JavaScript基础1</span>
            <span class="post-date" title="2022-08-07 00:00:00">2022/08/07</span>
        </a>
        
        
        <a  class="全部文章 前端 JS "
           href="/2022/08/07/JavaScript%E5%9F%BA%E7%A1%802/"
           data-tag="前端,JavaScript"
           data-author="" >
            <span class="post-title" title="JavaScript基础2">JavaScript基础2</span>
            <span class="post-date" title="2022-08-07 00:00:00">2022/08/07</span>
        </a>
        
        
        <a  class="全部文章 前端 HTML "
           href="/2022/08/06/%E7%A7%BB%E5%8A%A8Web%E5%B8%83%E5%B1%802/"
           data-tag="前端,CSS"
           data-author="" >
            <span class="post-title" title="移动Web布局2">移动Web布局2</span>
            <span class="post-date" title="2022-08-06 00:00:00">2022/08/06</span>
        </a>
        
        
        <a  class="全部文章 前端 HTML "
           href="/2022/08/05/%E7%A7%BB%E5%8A%A8Web%E5%B8%83%E5%B1%801/"
           data-tag="前端,CSS"
           data-author="" >
            <span class="post-title" title="移动Web布局1">移动Web布局1</span>
            <span class="post-date" title="2022-08-05 00:00:00">2022/08/05</span>
        </a>
        
        
        <a  class="全部文章 前端 HTML "
           href="/2022/08/04/HTML5&CSS3/"
           data-tag="前端,CSS"
           data-author="" >
            <span class="post-title" title="HTML5&amp;CSS3">HTML5&amp;CSS3</span>
            <span class="post-date" title="2022-08-04 00:00:00">2022/08/04</span>
        </a>
        
        
        <a  class="全部文章 前端 CSS "
           href="/2022/08/03/CSS%E5%9F%BA%E7%A1%80%E6%80%BB%E7%BB%9302/"
           data-tag="前端,CSS"
           data-author="" >
            <span class="post-title" title="CSS基础总结02">CSS基础总结02</span>
            <span class="post-date" title="2022-08-03 00:00:00">2022/08/03</span>
        </a>
        
        
        <a  class="全部文章 前端 CSS "
           href="/2022/08/02/CSS%E5%9F%BA%E7%A1%80%E6%80%BB%E7%BB%9301/"
           data-tag="前端,CSS"
           data-author="" >
            <span class="post-title" title="CSS基础总结01">CSS基础总结01</span>
            <span class="post-date" title="2022-08-02 00:00:00">2022/08/02</span>
        </a>
        
        
        <a  class="全部文章 前端 HTML "
           href="/2022/08/01/HTML%E5%9F%BA%E7%A1%80%E6%80%BB%E7%BB%93/"
           data-tag="前端,HTML"
           data-author="" >
            <span class="post-title" title="HTML基础总结">HTML基础总结</span>
            <span class="post-date" title="2022-08-01 00:00:00">2022/08/01</span>
        </a>
        
        
        <a  class="全部文章 GO "
           href="/2022/08/01/%E5%B9%BC%E9%BA%9F%E5%AE%9E%E9%AA%8C%E5%AE%A4Golang11-panic%E5%92%8Crevocer/"
           data-tag="GO"
           data-author="" >
            <span class="post-title" title="幼麟实验室Golang11-panic和revocer">幼麟实验室Golang11-panic和revocer</span>
            <span class="post-date" title="2022-08-01 00:00:00">2022/08/01</span>
        </a>
        
        
        <a  class="全部文章 REDIS "
           href="/2022/07/29/Redis%E5%BA%95%E5%B1%82%E8%AE%BE%E8%AE%A1%E4%B8%8E%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/"
           data-tag="后端,REDIS"
           data-author="" >
            <span class="post-title" title="Redis底层设计与源码分析">Redis底层设计与源码分析</span>
            <span class="post-date" title="2022-07-29 00:00:00">2022/07/29</span>
        </a>
        
        
        <a  class="全部文章 GO "
           href="/2022/07/29/%E5%B9%BC%E9%BA%9F%E5%AE%9E%E9%AA%8C%E5%AE%A4Golang09-defer/"
           data-tag="GO"
           data-author="" >
            <span class="post-title" title="幼麟实验室Golang09-defer">幼麟实验室Golang09-defer</span>
            <span class="post-date" title="2022-07-29 00:00:00">2022/07/29</span>
        </a>
        
        
        <a  class="全部文章 GO "
           href="/2022/07/28/%E5%B9%BC%E9%BA%9F%E5%AE%9E%E9%AA%8C%E5%AE%A4Golang08-%E6%96%B9%E6%B3%95/"
           data-tag="GO"
           data-author="" >
            <span class="post-title" title="幼麟实验室Golang08-方法">幼麟实验室Golang08-方法</span>
            <span class="post-date" title="2022-07-28 00:00:00">2022/07/28</span>
        </a>
        
        
        <a  class="全部文章 GO "
           href="/2022/07/27/%E5%B9%BC%E9%BA%9F%E5%AE%9E%E9%AA%8C%E5%AE%A4Golang07-%E9%97%AD%E5%8C%85/"
           data-tag="GO"
           data-author="" >
            <span class="post-title" title="幼麟实验室Golang07-闭包">幼麟实验室Golang07-闭包</span>
            <span class="post-date" title="2022-07-27 00:00:00">2022/07/27</span>
        </a>
        
        
        <a  class="全部文章 GO "
           href="/2022/07/26/%E5%B9%BC%E9%BA%9F%E5%AE%9E%E9%AA%8C%E5%AE%A4Golang06-%E4%BC%A0%E5%8F%82%E5%92%8C%E8%BF%94%E5%9B%9E%E5%80%BC/"
           data-tag="GO"
           data-author="" >
            <span class="post-title" title="幼麟实验室Golang06-传参和返回值">幼麟实验室Golang06-传参和返回值</span>
            <span class="post-date" title="2022-07-26 00:00:00">2022/07/26</span>
        </a>
        
        
        <a  class="全部文章 GO "
           href="/2022/07/25/%E5%B9%BC%E9%BA%9F%E5%AE%9E%E9%AA%8C%E5%AE%A4Golang05-%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8%E6%A0%88/"
           data-tag="GO"
           data-author="" >
            <span class="post-title" title="幼麟实验室Golang05-函数调用栈">幼麟实验室Golang05-函数调用栈</span>
            <span class="post-date" title="2022-07-25 00:00:00">2022/07/25</span>
        </a>
        
        
        <a  class="全部文章 GO "
           href="/2022/07/24/%E5%B9%BC%E9%BA%9F%E5%AE%9E%E9%AA%8C%E5%AE%A4Golang04-map/"
           data-tag="GO"
           data-author="" >
            <span class="post-title" title="幼麟实验室Golang04-map">幼麟实验室Golang04-map</span>
            <span class="post-date" title="2022-07-24 00:00:00">2022/07/24</span>
        </a>
        
        
        <a  class="全部文章 GO "
           href="/2022/07/23/%E5%B9%BC%E9%BA%9F%E5%AE%9E%E9%AA%8C%E5%AE%A4Golang03-%E5%86%85%E5%AD%98%E5%AF%B9%E9%BD%90/"
           data-tag="GO"
           data-author="" >
            <span class="post-title" title="幼麟实验室Golang03-内存对齐">幼麟实验室Golang03-内存对齐</span>
            <span class="post-date" title="2022-07-23 00:00:00">2022/07/23</span>
        </a>
        
        
        <a  class="全部文章 PHP 基础 "
           href="/2022/07/22/PHP5-8%E5%90%84%E7%89%88%E6%9C%AC%E7%89%B9%E6%80%A7%E8%AF%A6%E8%A7%A3/"
           data-tag="后端,PHP"
           data-author="" >
            <span class="post-title" title="PHP5-8各版本特性详解">PHP5-8各版本特性详解</span>
            <span class="post-date" title="2022-07-22 00:00:00">2022/07/22</span>
        </a>
        
        
        <a  class="全部文章 GO "
           href="/2022/07/22/%E5%B9%BC%E9%BA%9F%E5%AE%9E%E9%AA%8C%E5%AE%A4Golang02-slice/"
           data-tag="GO"
           data-author="" >
            <span class="post-title" title="幼麟实验室Golang02-slice">幼麟实验室Golang02-slice</span>
            <span class="post-date" title="2022-07-22 00:00:00">2022/07/22</span>
        </a>
        
        
        <a  class="全部文章 GO "
           href="/2022/07/21/%E5%B9%BC%E9%BA%9F%E5%AE%9E%E9%AA%8C%E5%AE%A4Golang01-string/"
           data-tag="GO"
           data-author="" >
            <span class="post-title" title="幼麟实验室Golang01-string">幼麟实验室Golang01-string</span>
            <span class="post-date" title="2022-07-21 00:00:00">2022/07/21</span>
        </a>
        
        
        <a  class="全部文章 K8S K8S架构师 "
           href="/2022/07/15/K8S%E6%9E%B6%E6%9E%84%E5%B8%8815/"
           data-tag="K8S,Docker"
           data-author="" >
            <span class="post-title" title="15中间件容器化-Helm">15中间件容器化-Helm</span>
            <span class="post-date" title="2022-07-15 00:00:00">2022/07/15</span>
        </a>
        
        
        <a  class="全部文章 K8S K8S架构师 "
           href="/2022/07/14/K8S%E6%9E%B6%E6%9E%84%E5%B8%8814/"
           data-tag="K8S,Docker"
           data-author="" >
            <span class="post-title" title="14云原生存储">14云原生存储</span>
            <span class="post-date" title="2022-07-14 00:00:00">2022/07/14</span>
        </a>
        
        
        <a  class="全部文章 K8S K8S架构师 "
           href="/2022/07/13/K8S%E6%9E%B6%E6%9E%84%E5%B8%8813/"
           data-tag="K8S,Docker"
           data-author="" >
            <span class="post-title" title="13权限控制">13权限控制</span>
            <span class="post-date" title="2022-07-13 00:00:00">2022/07/13</span>
        </a>
        
        
        <a  class="全部文章 K8S K8S架构师 "
           href="/2022/07/12/K8S%E6%9E%B6%E6%9E%84%E5%B8%8812/"
           data-tag="K8S,Docker"
           data-author="" >
            <span class="post-title" title="12资源配额">12资源配额</span>
            <span class="post-date" title="2022-07-12 00:00:00">2022/07/12</span>
        </a>
        
        
        <a  class="全部文章 K8S K8S架构师 "
           href="/2022/07/11/K8S%E6%9E%B6%E6%9E%84%E5%B8%8811/"
           data-tag="K8S,Docker"
           data-author="" >
            <span class="post-title" title="11计划任务-污点-亲和力">11计划任务-污点-亲和力</span>
            <span class="post-date" title="2022-07-11 00:00:00">2022/07/11</span>
        </a>
        
        
        <a  class="全部文章 K8S K8S架构师 "
           href="/2022/07/09/K8S%E6%9E%B6%E6%9E%84%E5%B8%8810/"
           data-tag="K8S,Docker"
           data-author="" >
            <span class="post-title" title="10持久化存储">10持久化存储</span>
            <span class="post-date" title="2022-07-09 00:00:00">2022/07/09</span>
        </a>
        
        
        <a  class="全部文章 K8S K8S架构师 "
           href="/2022/07/09/K8S%E6%9E%B6%E6%9E%84%E5%B8%8809/"
           data-tag="K8S,Docker"
           data-author="" >
            <span class="post-title" title="09配置管理">09配置管理</span>
            <span class="post-date" title="2022-07-09 00:00:00">2022/07/09</span>
        </a>
        
        
        <a  class="全部文章 K8S K8S架构师 "
           href="/2022/07/08/K8S%E6%9E%B6%E6%9E%84%E5%B8%8808/"
           data-tag="K8S,Docker"
           data-author="" >
            <span class="post-title" title="08服务发布">08服务发布</span>
            <span class="post-date" title="2022-07-08 00:00:00">2022/07/08</span>
        </a>
        
        
        <a  class="全部文章 K8S K8S架构师 "
           href="/2022/07/07/K8S%E6%9E%B6%E6%9E%84%E5%B8%8807/"
           data-tag="K8S,Docker"
           data-author="" >
            <span class="post-title" title="07资源调度">07资源调度</span>
            <span class="post-date" title="2022-07-07 00:00:00">2022/07/07</span>
        </a>
        
        
        <a  class="全部文章 K8S K8S架构师 "
           href="/2022/07/06/K8S%E6%9E%B6%E6%9E%84%E5%B8%8806/"
           data-tag="K8S,Docker"
           data-author="" >
            <span class="post-title" title="06基本概念">06基本概念</span>
            <span class="post-date" title="2022-07-06 00:00:00">2022/07/06</span>
        </a>
        
        
        <a  class="全部文章 K8S K8S架构师 "
           href="/2022/07/05/K8S%E6%9E%B6%E6%9E%84%E5%B8%8805/"
           data-tag="K8S,Docker"
           data-author="" >
            <span class="post-title" title="05容器基础">05容器基础</span>
            <span class="post-date" title="2022-07-05 00:00:00">2022/07/05</span>
        </a>
        
        
        <a  class="全部文章 K8S K8S架构师 "
           href="/2022/07/03/K8S%E6%9E%B6%E6%9E%84%E5%B8%8803/"
           data-tag="K8S"
           data-author="" >
            <span class="post-title" title="03Kubeadm高可用集群下">03Kubeadm高可用集群下</span>
            <span class="post-date" title="2022-07-03 00:00:00">2022/07/03</span>
        </a>
        
        
        <a  class="全部文章 K8S K8S架构师 "
           href="/2022/07/03/K8S%E6%9E%B6%E6%9E%84%E5%B8%8804/"
           data-tag="K8S"
           data-author="" >
            <span class="post-title" title="04二进制高可用集群">04二进制高可用集群</span>
            <span class="post-date" title="2022-07-03 00:00:00">2022/07/03</span>
        </a>
        
        
        <a  class="全部文章 K8S K8S架构师 "
           href="/2022/07/02/K8S%E6%9E%B6%E6%9E%84%E5%B8%8802/"
           data-tag="K8S"
           data-author="" >
            <span class="post-title" title="02Kubeadm高可用集群上">02Kubeadm高可用集群上</span>
            <span class="post-date" title="2022-07-02 00:00:00">2022/07/02</span>
        </a>
        
        
        <a  class="全部文章 英语 语法 "
           href="/2022/07/02/%E8%8B%B1%E8%AF%AD%E8%AF%AD%E6%B3%9502%E8%AF%8D%E6%80%A7/"
           data-tag="英语,语法"
           data-author="" >
            <span class="post-title" title="02词性">02词性</span>
            <span class="post-date" title="2022-07-02 00:00:00">2022/07/02</span>
        </a>
        
        
        <a  class="全部文章 K8S K8S架构师 "
           href="/2022/07/01/K8S%E6%9E%B6%E6%9E%84%E5%B8%8801/"
           data-tag="K8S"
           data-author="" >
            <span class="post-title" title="01准备工作">01准备工作</span>
            <span class="post-date" title="2022-07-01 00:00:00">2022/07/01</span>
        </a>
        
        
        <a  class="全部文章 GO "
           href="/2022/06/04/GoWeb04-Zap%E6%97%A5%E5%BF%97/"
           data-tag="GO"
           data-author="" >
            <span class="post-title" title="GoWeb高级04-Zap日志">GoWeb高级04-Zap日志</span>
            <span class="post-date" title="2022-06-04 00:00:00">2022/06/04</span>
        </a>
        
        
        <a  class="全部文章 GO "
           href="/2022/06/03/GoWeb03-Mysql%E5%92%8CRedis/"
           data-tag="GO"
           data-author="" >
            <span class="post-title" title="GoWeb高级03-Mysql和Redis">GoWeb高级03-Mysql和Redis</span>
            <span class="post-date" title="2022-06-03 00:00:00">2022/06/03</span>
        </a>
        
        
        <a  class="全部文章 GO "
           href="/2022/06/02/GoWeb02-Gin%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/"
           data-tag="GO"
           data-author="" >
            <span class="post-title" title="GoWeb02-Gin源码解析">GoWeb02-Gin源码解析</span>
            <span class="post-date" title="2022-06-02 00:00:00">2022/06/02</span>
        </a>
        
        
        <a  class="全部文章 GO "
           href="/2022/06/01/GoWeb01-Gin%E5%9F%BA%E7%A1%80/"
           data-tag="GO"
           data-author="" >
            <span class="post-title" title="GoWeb01-Gin基础">GoWeb01-Gin基础</span>
            <span class="post-date" title="2022-06-01 00:00:00">2022/06/01</span>
        </a>
        
        
        <a  class="全部文章 GO "
           href="/2022/05/12/Golang%E7%9A%84GC%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6/"
           data-tag="GO"
           data-author="" >
            <span class="post-title" title="Golang的GC回收机制">Golang的GC回收机制</span>
            <span class="post-date" title="2022-05-12 00:00:00">2022/05/12</span>
        </a>
        
        
        <a  class="全部文章 GO "
           href="/2022/05/11/Golang%E7%9A%84GMP%E8%AF%A6%E8%A7%A3/"
           data-tag="GO"
           data-author="" >
            <span class="post-title" title="Golang的GMP详解">Golang的GMP详解</span>
            <span class="post-date" title="2022-05-11 00:00:00">2022/05/11</span>
        </a>
        
        
        <a  class="全部文章 GO "
           href="/2022/05/02/Golang%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/"
           data-tag="GO"
           data-author="" >
            <span class="post-title" title="Golang内存管理">Golang内存管理</span>
            <span class="post-date" title="2022-05-02 00:00:00">2022/05/02</span>
        </a>
        
        
        <a  class="全部文章 K8S "
           href="/2022/04/12/K8S12-%E9%9B%86%E7%BE%A4%E8%B5%84%E6%BA%90%E7%9B%91%E6%8E%A7/"
           data-tag="K8S,容器"
           data-author="" >
            <span class="post-title" title="K8S12-集群资源监控">K8S12-集群资源监控</span>
            <span class="post-date" title="2022-04-12 00:00:00">2022/04/12</span>
        </a>
        
        
        <a  class="全部文章 K8S K8S基础 "
           href="/2022/04/11/K8S11-NFS%E7%BD%91%E7%BB%9C%E5%AD%98%E5%82%A8/"
           data-tag="K8S,容器"
           data-author="" >
            <span class="post-title" title="K8S11-NFS网络存储">K8S11-NFS网络存储</span>
            <span class="post-date" title="2022-04-11 00:00:00">2022/04/11</span>
        </a>
        
        
        <a  class="全部文章 K8S K8S基础 "
           href="/2022/04/10/K8S10-Helm/"
           data-tag="K8S,容器"
           data-author="" >
            <span class="post-title" title="K8S10-Helm">K8S10-Helm</span>
            <span class="post-date" title="2022-04-10 00:00:00">2022/04/10</span>
        </a>
        
        
        <a  class="全部文章 K8S K8S基础 "
           href="/2022/04/09/K8S09-Ingress/"
           data-tag="K8S,容器"
           data-author="" >
            <span class="post-title" title="K8S09-Ingress">K8S09-Ingress</span>
            <span class="post-date" title="2022-04-09 00:00:00">2022/04/09</span>
        </a>
        
        
        <a  class="全部文章 K8S K8S基础 "
           href="/2022/04/08/K8S08-RBAC/"
           data-tag="K8S,容器"
           data-author="" >
            <span class="post-title" title="K8S08-RBAC">K8S08-RBAC</span>
            <span class="post-date" title="2022-04-08 00:00:00">2022/04/08</span>
        </a>
        
        
        <a  class="全部文章 K8S K8S基础 "
           href="/2022/04/07/K8S07-Secret-ConfigMap/"
           data-tag="K8S,容器"
           data-author="" >
            <span class="post-title" title="K8S07-Secret-ConfigMap">K8S07-Secret-ConfigMap</span>
            <span class="post-date" title="2022-04-07 00:00:00">2022/04/07</span>
        </a>
        
        
        <a  class="全部文章 K8S K8S基础 "
           href="/2022/04/06/K8S06-Service-Job/"
           data-tag="K8S,容器"
           data-author="" >
            <span class="post-title" title="K8S06-Service-Job">K8S06-Service-Job</span>
            <span class="post-date" title="2022-04-06 00:00:00">2022/04/06</span>
        </a>
        
        
        <a  class="全部文章 K8S K8S基础 "
           href="/2022/04/05/K8S05-Controller-Deployment/"
           data-tag="K8S,容器"
           data-author="" >
            <span class="post-title" title="K8S05-Controller-Deployment">K8S05-Controller-Deployment</span>
            <span class="post-date" title="2022-04-05 00:00:00">2022/04/05</span>
        </a>
        
        
        <a  class="全部文章 K8S K8S基础 "
           href="/2022/04/04/K8S04-POD%E5%92%8CLabel/"
           data-tag="K8S,容器"
           data-author="" >
            <span class="post-title" title="K8S04-POD和Label">K8S04-POD和Label</span>
            <span class="post-date" title="2022-04-04 00:00:00">2022/04/04</span>
        </a>
        
        
        <a  class="全部文章 K8S K8S基础 "
           href="/2022/04/03/K8S03-YAML/"
           data-tag="K8S,容器"
           data-author="" >
            <span class="post-title" title="K8S03-YAML">K8S03-YAML</span>
            <span class="post-date" title="2022-04-03 00:00:00">2022/04/03</span>
        </a>
        
        
        <a  class="全部文章 K8S K8S基础 "
           href="/2022/04/02/K8S02-Kubectl/"
           data-tag="K8S,容器"
           data-author="" >
            <span class="post-title" title="K8S02-kubectl">K8S02-kubectl</span>
            <span class="post-date" title="2022-04-02 00:00:00">2022/04/02</span>
        </a>
        
        
        <a  class="全部文章 K8S K8S基础 "
           href="/2022/04/01/K8S01-%E5%AE%89%E8%A3%85%E7%8E%AF%E5%A2%83/"
           data-tag="K8S,容器"
           data-author="" >
            <span class="post-title" title="K8S01-安装环境">K8S01-安装环境</span>
            <span class="post-date" title="2022-04-01 00:00:00">2022/04/01</span>
        </a>
        
        
        <a  class="全部文章 GO "
           href="/2022/02/22/Golang%E5%B8%B8%E8%A7%81%E9%94%99%E8%AF%AF/"
           data-tag="GO"
           data-author="" >
            <span class="post-title" title="Golang常见错误">Golang常见错误</span>
            <span class="post-date" title="2022-02-22 00:00:00">2022/02/22</span>
        </a>
        
        
        <a  class="全部文章 REDIS "
           href="/2022/02/13/Redis13-%E6%80%BB%E7%BB%93/"
           data-tag="后端,REDIS"
           data-author="" >
            <span class="post-title" title="Redis13-总结">Redis13-总结</span>
            <span class="post-date" title="2022-02-13 00:00:00">2022/02/13</span>
        </a>
        
        
        <a  class="全部文章 REDIS "
           href="/2022/02/12/Redis12-%E6%96%B0%E5%8A%9F%E8%83%BD%E4%BB%8B%E7%BB%8D/"
           data-tag="后端,REDIS"
           data-author="" >
            <span class="post-title" title="Redis12-新功能介绍">Redis12-新功能介绍</span>
            <span class="post-date" title="2022-02-12 00:00:00">2022/02/12</span>
        </a>
        
        
        <a  class="全部文章 REDIS "
           href="/2022/02/11/Redis11-%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81/"
           data-tag="后端,REDIS"
           data-author="" >
            <span class="post-title" title="Redis11-分布式锁">Redis11-分布式锁</span>
            <span class="post-date" title="2022-02-11 00:00:00">2022/02/11</span>
        </a>
        
        
        <a  class="全部文章 REDIS "
           href="/2022/02/10/Redis10-%E7%BC%93%E5%AD%98%E7%A9%BF%E9%80%8F%C2%B7%E5%87%BB%E7%A9%BF%C2%B7%E9%9B%AA%E5%B4%A9/"
           data-tag="后端,REDIS"
           data-author="" >
            <span class="post-title" title="Redis10-缓存穿透·击穿·雪崩">Redis10-缓存穿透·击穿·雪崩</span>
            <span class="post-date" title="2022-02-10 00:00:00">2022/02/10</span>
        </a>
        
        
        <a  class="全部文章 REDIS "
           href="/2022/02/09/Redis09-%E9%9B%86%E7%BE%A4/"
           data-tag="后端,REDIS"
           data-author="" >
            <span class="post-title" title="Redis09-集群">Redis09-集群</span>
            <span class="post-date" title="2022-02-09 00:00:00">2022/02/09</span>
        </a>
        
        
        <a  class="全部文章 REDIS "
           href="/2022/02/08/Redis08-%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6/"
           data-tag="后端,REDIS"
           data-author="" >
            <span class="post-title" title="Redis08-主从复制">Redis08-主从复制</span>
            <span class="post-date" title="2022-02-08 00:00:00">2022/02/08</span>
        </a>
        
        
        <a  class="全部文章 REDIS "
           href="/2022/02/07/Redis07-%E6%8C%81%E4%B9%85%E5%8C%96/"
           data-tag="后端,REDIS"
           data-author="" >
            <span class="post-title" title="Redis07-持久化">Redis07-持久化</span>
            <span class="post-date" title="2022-02-07 00:00:00">2022/02/07</span>
        </a>
        
        
        <a  class="全部文章 REDIS "
           href="/2022/02/06/Redis06-%E4%BA%8B%E5%8A%A1%E3%80%81%E9%94%81%E3%80%81%E7%A7%92%E6%9D%80/"
           data-tag="后端,REDIS"
           data-author="" >
            <span class="post-title" title="Redis06-事务、锁、秒杀">Redis06-事务、锁、秒杀</span>
            <span class="post-date" title="2022-02-06 00:00:00">2022/02/06</span>
        </a>
        
        
        <a  class="全部文章 REDIS "
           href="/2022/02/05/Redis05-Jedis%E3%80%81SprintBoot%E6%95%B4%E5%90%88Redis/"
           data-tag="后端,REDIS"
           data-author="" >
            <span class="post-title" title="Redis05-Jedis、SprintBoot整合Redis">Redis05-Jedis、SprintBoot整合Redis</span>
            <span class="post-date" title="2022-02-05 00:00:00">2022/02/05</span>
        </a>
        
        
        <a  class="全部文章 REDIS "
           href="/2022/02/04/Redis04-%E6%96%B0%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/"
           data-tag="后端,REDIS"
           data-author="" >
            <span class="post-title" title="Redis04-新数据类型">Redis04-新数据类型</span>
            <span class="post-date" title="2022-02-04 00:00:00">2022/02/04</span>
        </a>
        
        
        <a  class="全部文章 REDIS "
           href="/2022/02/03/Redis03-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E3%80%81%E5%8F%91%E5%B8%83%E5%92%8C%E8%AE%A2%E9%98%85/"
           data-tag="后端,REDIS"
           data-author="" >
            <span class="post-title" title="Redis03-配置文件、发布和订阅">Redis03-配置文件、发布和订阅</span>
            <span class="post-date" title="2022-02-03 00:00:00">2022/02/03</span>
        </a>
        
        
        <a  class="全部文章 REDIS "
           href="/2022/02/02/Redis02-%E4%BA%94%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/"
           data-tag="后端,REDIS"
           data-author="" >
            <span class="post-title" title="Redis02-常用五大数据类型">Redis02-常用五大数据类型</span>
            <span class="post-date" title="2022-02-02 00:00:00">2022/02/02</span>
        </a>
        
        
        <a  class="全部文章 REDIS "
           href="/2022/02/01/Redis01-%E5%9F%BA%E7%A1%80%E5%8F%8A%E5%AE%89%E8%A3%85/"
           data-tag="后端,REDIS"
           data-author="" >
            <span class="post-title" title="Redis01-基础及安装">Redis01-基础及安装</span>
            <span class="post-date" title="2022-02-01 00:00:00">2022/02/01</span>
        </a>
        
        
        <a  class="全部文章 JAVA "
           href="/2021/11/25/JavaWeb03-JSP/"
           data-tag="后端,Java"
           data-author="" >
            <span class="post-title" title="JavaWeb03-JSP">JavaWeb03-JSP</span>
            <span class="post-date" title="2021-11-25 00:00:00">2021/11/25</span>
        </a>
        
        
        <a  class="全部文章 JAVA "
           href="/2021/11/22/JavaWeb02-Servlet%E3%80%81Cookie%E3%80%81Session/"
           data-tag="后端,Java"
           data-author="" >
            <span class="post-title" title="JavaWeb02-Servlet、Cookie、Session">JavaWeb02-Servlet、Cookie、Session</span>
            <span class="post-date" title="2021-11-22 00:00:00">2021/11/22</span>
        </a>
        
        
        <a  class="全部文章 JAVA "
           href="/2021/11/21/JavaWeb01-Tomcat%E3%80%81Maven%E9%85%8D%E7%BD%AE/"
           data-tag="后端,Java"
           data-author="" >
            <span class="post-title" title="JavaWeb01-Tomcat、Maven配置">JavaWeb01-Tomcat、Maven配置</span>
            <span class="post-date" title="2021-11-21 00:00:00">2021/11/21</span>
        </a>
        
        
        <a  class="全部文章 JAVA "
           href="/2021/11/15/Java02-JDBC/"
           data-tag="后端,Java"
           data-author="" >
            <span class="post-title" title="Java01-JDBC">Java01-JDBC</span>
            <span class="post-date" title="2021-11-15 00:00:00">2021/11/15</span>
        </a>
        
        
        <a  class="全部文章 JAVA "
           href="/2021/11/14/Java01-JavaSE/"
           data-tag="后端,Java"
           data-author="" >
            <span class="post-title" title="Java01-JavaSE">Java01-JavaSE</span>
            <span class="post-date" title="2021-11-14 00:00:00">2021/11/14</span>
        </a>
        
        
        <a  class="全部文章 PHP Laravel "
           href="/2021/10/04/Laravel%E5%BA%95%E5%B1%8204-%E5%8A%A0%E8%BD%BD%E5%B9%B6%E5%90%AF%E5%8A%A8ServiceProvider/"
           data-tag="后端,PHP,Laravel"
           data-author="" >
            <span class="post-title" title="Laravel底层04-加载并启动ServiceProvider">Laravel底层04-加载并启动ServiceProvider</span>
            <span class="post-date" title="2021-10-04 00:00:00">2021/10/04</span>
        </a>
        
        
        <a  class="全部文章 PHP Laravel "
           href="/2021/10/03/Laravel%E5%BA%95%E5%B1%8203-make%E5%92%8Cbuild/"
           data-tag="后端,PHP,Laravel"
           data-author="" >
            <span class="post-title" title="Laravel底层03-make和build">Laravel底层03-make和build</span>
            <span class="post-date" title="2021-10-03 00:00:00">2021/10/03</span>
        </a>
        
        
        <a  class="全部文章 PHP Laravel "
           href="/2021/10/02/Laravel%E5%BA%95%E5%B1%8202-%E6%9C%8D%E5%8A%A1%E5%AE%B9%E5%99%A8%EF%BC%8C%E6%9C%8D%E5%8A%A1%E6%8F%90%E4%BE%9B%E8%80%85/"
           data-tag="后端,PHP,Laravel"
           data-author="" >
            <span class="post-title" title="Laravel底层02-服务容器，服务提供者">Laravel底层02-服务容器，服务提供者</span>
            <span class="post-date" title="2021-10-02 00:00:00">2021/10/02</span>
        </a>
        
        
        <a  class="全部文章 PHP Laravel "
           href="/2021/10/01/Laravel%E5%BA%95%E5%B1%8201-%E6%A1%86%E6%9E%B6%E6%A0%B8%E5%BF%83%EF%BC%8C%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5%EF%BC%8C%E9%97%AD%E5%8C%85/"
           data-tag="后端,PHP,Laravel"
           data-author="" >
            <span class="post-title" title="Laravel底层01-框架核心，依赖注入，闭包">Laravel底层01-框架核心，依赖注入，闭包</span>
            <span class="post-date" title="2021-10-01 00:00:00">2021/10/01</span>
        </a>
        
        
        <a  class="全部文章 DOCKER "
           href="/2021/08/08/Docker08-DockerCompose/"
           data-tag="DOCKER,容器"
           data-author="" >
            <span class="post-title" title="Docker08-DockerCompose">Docker08-DockerCompose</span>
            <span class="post-date" title="2021-08-08 00:00:00">2021/08/08</span>
        </a>
        
        
        <a  class="全部文章 DOCKER "
           href="/2021/08/07/Docker07-%E7%BD%91%E7%BB%9C/"
           data-tag="DOCKER,容器"
           data-author="" >
            <span class="post-title" title="Docker07-网络">Docker07-网络</span>
            <span class="post-date" title="2021-08-07 00:00:00">2021/08/07</span>
        </a>
        
        
        <a  class="全部文章 DOCKER "
           href="/2021/08/06/Docker06-%E6%95%B0%E6%8D%AE%E5%8D%B7%E5%AE%B9%E5%99%A8%E5%92%8CDockerfile/"
           data-tag="DOCKER,容器"
           data-author="" >
            <span class="post-title" title="Docker06-数据卷容器和Dockerfile">Docker06-数据卷容器和Dockerfile</span>
            <span class="post-date" title="2021-08-06 00:00:00">2021/08/06</span>
        </a>
        
        
        <a  class="全部文章 DOCKER "
           href="/2021/08/05/Docker05-%E6%95%B0%E6%8D%AE%E6%8C%82%E8%BD%BD/"
           data-tag="DOCKER,容器"
           data-author="" >
            <span class="post-title" title="Docker05-数据挂载">Docker05-数据挂载</span>
            <span class="post-date" title="2021-08-05 00:00:00">2021/08/05</span>
        </a>
        
        
        <a  class="全部文章 DOCKER "
           href="/2021/08/04/Docker04-%E9%95%9C%E5%83%8F%E7%9A%84%E5%8E%9F%E7%90%86%E5%92%8C%E6%8F%90%E4%BA%A4/"
           data-tag="DOCKER,容器"
           data-author="" >
            <span class="post-title" title="Docker04-镜像的原理和提交">Docker04-镜像的原理和提交</span>
            <span class="post-date" title="2021-08-04 00:00:00">2021/08/04</span>
        </a>
        
        
        <a  class="全部文章 DOCKER "
           href="/2021/08/03/Docker03-%E5%AE%89%E8%A3%85Nginx,Elasticsearch,Portainer%E5%8F%AF%E8%A7%86%E5%8C%96/"
           data-tag="DOCKER,容器"
           data-author="" >
            <span class="post-title" title="Docker03-安装Nginx,Elasticsearch,Portainer可视化">Docker03-安装Nginx,Elasticsearch,Portainer可视化</span>
            <span class="post-date" title="2021-08-03 00:00:00">2021/08/03</span>
        </a>
        
        
        <a  class="全部文章 DOCKER "
           href="/2021/08/02/Docker02-%E6%A6%82%E5%BF%B5%E5%92%8C%E5%91%BD%E4%BB%A4/"
           data-tag="DOCKER,容器"
           data-author="" >
            <span class="post-title" title="Docker02-概念和命令">Docker02-概念和命令</span>
            <span class="post-date" title="2021-08-02 00:00:00">2021/08/02</span>
        </a>
        
        
        <a  class="全部文章 DOCKER "
           href="/2021/08/01/Docker01-%E5%AE%89%E8%A3%85%E5%92%8C%E5%8D%B8%E8%BD%BD/"
           data-tag="DOCKER,容器"
           data-author="" >
            <span class="post-title" title="Docker01-安装和卸载">Docker01-安装和卸载</span>
            <span class="post-date" title="2021-08-01 00:00:00">2021/08/01</span>
        </a>
        
        
        <a  class="全部文章 PHP Laravel "
           href="/2021/08/01/Laravel-Swoole%E5%95%86%E5%9F%8E01-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"
           data-tag="Swoole,PHP"
           data-author="" >
            <span class="post-title" title="Laravel-Swoole01-环境搭建.md">Laravel-Swoole01-环境搭建.md</span>
            <span class="post-date" title="2021-08-01 00:00:00">2021/08/01</span>
        </a>
        
        
        <a  class="全部文章 GO "
           href="/2021/07/11/GOPL11-%E5%8F%8D%E5%B0%84/"
           data-tag="GO,GOPL"
           data-author="" >
            <span class="post-title" title="GOPL11-反射">GOPL11-反射</span>
            <span class="post-date" title="2021-07-11 00:00:00">2021/07/11</span>
        </a>
        
        
        <a  class="全部文章 GO "
           href="/2021/07/10/GOPL10-%E6%B5%8B%E8%AF%95/"
           data-tag="GO,GOPL"
           data-author="" >
            <span class="post-title" title="GOPL10-测试">GOPL10-测试</span>
            <span class="post-date" title="2021-07-10 00:00:00">2021/07/10</span>
        </a>
        
        
        <a  class="全部文章 GO "
           href="/2021/07/09/GOPL09-%E5%8C%85%E5%92%8C%E5%B7%A5%E5%85%B7/"
           data-tag="GO,GOPL"
           data-author="" >
            <span class="post-title" title="GOPL09-包和工具">GOPL09-包和工具</span>
            <span class="post-date" title="2021-07-09 00:00:00">2021/07/09</span>
        </a>
        
        
        <a  class="全部文章 GO "
           href="/2021/07/08/GOPL08-%E5%9F%BA%E4%BA%8E%E5%85%B1%E4%BA%AB%E5%8F%98%E9%87%8F%E7%9A%84%E5%B9%B6%E5%8F%91/"
           data-tag="GO,GOPL"
           data-author="" >
            <span class="post-title" title="GOPL08-基于共享变量的并发">GOPL08-基于共享变量的并发</span>
            <span class="post-date" title="2021-07-08 00:00:00">2021/07/08</span>
        </a>
        
        
        <a  class="全部文章 GO "
           href="/2021/07/07/GOPL07-Goroutines%E5%92%8CChannels/"
           data-tag="GO,GOPL"
           data-author="" >
            <span class="post-title" title="GOPL07-Goroutines和Channels">GOPL07-Goroutines和Channels</span>
            <span class="post-date" title="2021-07-07 00:00:00">2021/07/07</span>
        </a>
        
        
        <a  class="全部文章 GO "
           href="/2021/07/06/GOPL06-%E6%8E%A5%E5%8F%A3/"
           data-tag="GO,GOPL"
           data-author="" >
            <span class="post-title" title="GOPL06-接口">GOPL06-接口</span>
            <span class="post-date" title="2021-07-06 00:00:00">2021/07/06</span>
        </a>
        
        
        <a  class="全部文章 GO "
           href="/2021/07/05/GOPL05-%E6%96%B9%E6%B3%95/"
           data-tag="GO,GOPL"
           data-author="" >
            <span class="post-title" title="GOPL05-方法">GOPL05-方法</span>
            <span class="post-date" title="2021-07-05 00:00:00">2021/07/05</span>
        </a>
        
        
        <a  class="全部文章 GO "
           href="/2021/07/04/GOPL04-%E5%87%BD%E6%95%B0/"
           data-tag="GO,GOPL"
           data-author="" >
            <span class="post-title" title="GOPL04-函数">GOPL04-函数</span>
            <span class="post-date" title="2021-07-04 00:00:00">2021/07/04</span>
        </a>
        
        
        <a  class="全部文章 GO "
           href="/2021/07/03/GOPL03-%E5%A4%8D%E5%90%88%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/"
           data-tag="GO,GOPL"
           data-author="" >
            <span class="post-title" title="GOPL03-复合数据类型">GOPL03-复合数据类型</span>
            <span class="post-date" title="2021-07-03 00:00:00">2021/07/03</span>
        </a>
        
        
        <a  class="全部文章 GO "
           href="/2021/07/02/GOPL02-%E5%9F%BA%E7%A1%80%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/"
           data-tag="GO,GOPL"
           data-author="" >
            <span class="post-title" title="GOPL02-基础数据类型">GOPL02-基础数据类型</span>
            <span class="post-date" title="2021-07-02 00:00:00">2021/07/02</span>
        </a>
        
        
        <a  class="全部文章 GO "
           href="/2021/07/01/GOPL01-%E7%A8%8B%E5%BA%8F%E7%BB%93%E6%9E%84/"
           data-tag="GO,GOPL"
           data-author="" >
            <span class="post-title" title="GOPL01-程序结构">GOPL01-程序结构</span>
            <span class="post-date" title="2021-07-01 00:00:00">2021/07/01</span>
        </a>
        
        
        <a  class="全部文章 MYSQL "
           href="/2021/06/21/Mysql45%E8%AE%B221-%E5%8A%A0%E9%94%81%E8%A7%84%E5%88%99/"
           data-tag="后端,MYSQL"
           data-author="" >
            <span class="post-title" title="Mysql45讲21-加锁规则">Mysql45讲21-加锁规则</span>
            <span class="post-date" title="2021-06-21 00:00:00">2021/06/21</span>
        </a>
        
        
        <a  class="全部文章 MYSQL "
           href="/2021/06/20/Mysql45%E8%AE%B220-%E5%B9%BB%E8%AF%BB-%E9%97%B4%E9%9A%99%E9%94%81/"
           data-tag="后端,MYSQL"
           data-author="" >
            <span class="post-title" title="Mysql45讲20-幻读-间隙锁">Mysql45讲20-幻读-间隙锁</span>
            <span class="post-date" title="2021-06-20 00:00:00">2021/06/20</span>
        </a>
        
        
        <a  class="全部文章 MYSQL "
           href="/2021/06/19/Mysql45%E8%AE%B219-%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5/"
           data-tag="后端,MYSQL"
           data-author="" >
            <span class="post-title" title="Mysql45讲19-问题排查">Mysql45讲19-问题排查</span>
            <span class="post-date" title="2021-06-19 00:00:00">2021/06/19</span>
        </a>
        
        
        <a  class="全部文章 MYSQL "
           href="/2021/06/17/Mysql45%E8%AE%B217-18-%E9%9A%8F%E6%9C%BA%E6%9F%A5%E8%AF%A2/"
           data-tag="后端,MYSQL"
           data-author="" >
            <span class="post-title" title="Mysql45讲17-18-随机查询">Mysql45讲17-18-随机查询</span>
            <span class="post-date" title="2021-06-17 00:00:00">2021/06/17</span>
        </a>
        
        
        <a  class="全部文章 MYSQL "
           href="/2021/06/06/Mysql45%E8%AE%B206-%E8%AE%A1%E6%95%B0%EF%BC%8C%E6%8E%92%E5%BA%8F/"
           data-tag="后端,MYSQL"
           data-author="" >
            <span class="post-title" title="Mysql45讲06-计数，排序">Mysql45讲06-计数，排序</span>
            <span class="post-date" title="2021-06-06 00:00:00">2021/06/06</span>
        </a>
        
        
        <a  class="全部文章 MYSQL "
           href="/2021/06/05/Mysql45%E8%AE%B205-%E5%89%8D%E7%BC%80%E7%B4%A2%E5%BC%95%EF%BC%8C%E5%88%B7%E7%9B%98/"
           data-tag="后端,MYSQL"
           data-author="" >
            <span class="post-title" title="Mysql45讲05-前缀索引，刷盘">Mysql45讲05-前缀索引，刷盘</span>
            <span class="post-date" title="2021-06-05 00:00:00">2021/06/05</span>
        </a>
        
        
        <a  class="全部文章 MYSQL "
           href="/2021/06/04/Mysql45%E8%AE%B204-%E6%99%AE%E9%80%9A%E7%B4%A2%E5%BC%95%EF%BC%8C%E5%94%AF%E4%B8%80%E7%B4%A2%E5%BC%95/"
           data-tag="后端,MYSQL"
           data-author="" >
            <span class="post-title" title="Mysql45讲04-普通索引，唯一索引">Mysql45讲04-普通索引，唯一索引</span>
            <span class="post-date" title="2021-06-04 00:00:00">2021/06/04</span>
        </a>
        
        
        <a  class="全部文章 MYSQL "
           href="/2021/06/03/Mysql45%E8%AE%B203-%E9%94%81/"
           data-tag="后端,MYSQL"
           data-author="" >
            <span class="post-title" title="Mysql45讲03-锁">Mysql45讲03-锁</span>
            <span class="post-date" title="2021-06-03 00:00:00">2021/06/03</span>
        </a>
        
        
        <a  class="全部文章 MYSQL "
           href="/2021/06/02/Mysql45%E8%AE%B202-%E4%BA%8B%E5%8A%A1%E5%92%8C%E7%B4%A2%E5%BC%95/"
           data-tag="后端,MYSQL"
           data-author="" >
            <span class="post-title" title="Mysql45讲02-事务和索引">Mysql45讲02-事务和索引</span>
            <span class="post-date" title="2021-06-02 00:00:00">2021/06/02</span>
        </a>
        
        
        <a  class="全部文章 MYSQL "
           href="/2021/06/02/Mysql45%E8%AE%B202-%E6%97%A5%E5%BF%97/"
           data-tag="后端,MYSQL"
           data-author="" >
            <span class="post-title" title="Mysql45讲02-日志">Mysql45讲02-日志</span>
            <span class="post-date" title="2021-06-02 00:00:00">2021/06/02</span>
        </a>
        
        
        <a  class="全部文章 MYSQL "
           href="/2021/06/01/Mysql45%E8%AE%B201-%E5%9F%BA%E7%A1%80%E6%9E%B6%E6%9E%84/"
           data-tag="后端,MYSQL"
           data-author="" >
            <span class="post-title" title="Mysql45讲01-基础架构">Mysql45讲01-基础架构</span>
            <span class="post-date" title="2021-06-01 00:00:00">2021/06/01</span>
        </a>
        
        
        <a  class="全部文章 面试 "
           href="/2021/05/18/Go%E9%9D%A2%E8%AF%95%E9%A2%9805/"
           data-tag="GO,面试"
           data-author="" >
            <span class="post-title" title="Go面试题05">Go面试题05</span>
            <span class="post-date" title="2021-05-18 00:00:00">2021/05/18</span>
        </a>
        
        
        <a  class="全部文章 面试 "
           href="/2021/05/17/Go%E9%9D%A2%E8%AF%95%E9%A2%9804/"
           data-tag="GO,面试"
           data-author="" >
            <span class="post-title" title="Go面试题04">Go面试题04</span>
            <span class="post-date" title="2021-05-17 00:00:00">2021/05/17</span>
        </a>
        
        
        <a  class="全部文章 面试 "
           href="/2021/05/16/Go%E9%9D%A2%E8%AF%95%E9%A2%9803/"
           data-tag="GO,面试"
           data-author="" >
            <span class="post-title" title="Go面试题03">Go面试题03</span>
            <span class="post-date" title="2021-05-16 00:00:00">2021/05/16</span>
        </a>
        
        
        <a  class="全部文章 面试 "
           href="/2021/05/15/Go%E9%9D%A2%E8%AF%95%E9%A2%9802/"
           data-tag="GO,面试"
           data-author="" >
            <span class="post-title" title="Go面试题02">Go面试题02</span>
            <span class="post-date" title="2021-05-15 00:00:00">2021/05/15</span>
        </a>
        
        
        <a  class="全部文章 面试 "
           href="/2021/05/14/Go%E9%9D%A2%E8%AF%95%E9%A2%9801/"
           data-tag="GO,面试"
           data-author="" >
            <span class="post-title" title="Go面试题01">Go面试题01</span>
            <span class="post-date" title="2021-05-14 00:00:00">2021/05/14</span>
        </a>
        
        
        <a  class="全部文章 WEB "
           href="/2021/05/03/%E9%AB%98%E6%80%A7%E8%83%BDWeb03-%E5%B9%B6%E5%8F%91%E5%A4%84%E7%90%86/"
           data-tag="WEB"
           data-author="" >
            <span class="post-title" title="高性能Web03-并发处理">高性能Web03-并发处理</span>
            <span class="post-date" title="2021-05-03 00:00:00">2021/05/03</span>
        </a>
        
        
        <a  class="全部文章 WEB "
           href="/2021/05/02/%E9%AB%98%E6%80%A7%E8%83%BDWeb02-%E7%BD%91%E7%BB%9C%E4%BC%A0%E8%BE%93/"
           data-tag="WEB"
           data-author="" >
            <span class="post-title" title="高性能Web02-网络传输">高性能Web02-网络传输</span>
            <span class="post-date" title="2021-05-02 00:00:00">2021/05/02</span>
        </a>
        
        
        <a  class="全部文章 WEB "
           href="/2021/05/01/%E9%AB%98%E6%80%A7%E8%83%BDWeb01-%E7%BB%AA%E8%AE%BA/"
           data-tag="WEB"
           data-author="" >
            <span class="post-title" title="构建高性能Web站点01">构建高性能Web站点01</span>
            <span class="post-date" title="2021-05-01 00:00:00">2021/05/01</span>
        </a>
        
        
        <a  class="全部文章 面试 "
           href="/2021/04/11/Mysql%E9%9D%A2%E8%AF%95%E9%A2%9801/"
           data-tag="面试,Mysql"
           data-author="" >
            <span class="post-title" title="Mysql面试题01">Mysql面试题01</span>
            <span class="post-date" title="2021-04-11 00:00:00">2021/04/11</span>
        </a>
        
        
        <a  class="全部文章 面试 "
           href="/2021/04/01/PHP%E9%9D%A2%E8%AF%95%E9%A2%98/"
           data-tag="面试,PHP"
           data-author="" >
            <span class="post-title" title="PHP面试题">PHP面试题</span>
            <span class="post-date" title="2021-04-01 00:00:00">2021/04/01</span>
        </a>
        
        <div id="no-item-tips">

        </div>
    </nav>
    <div id="outline-list">
    </div>
</div>

    </div>
    <div class="hide-list">
        <div class="semicircle" data-title="切换全屏 快捷键 s">
            <div class="brackets first"><</div>
            <div class="brackets">&gt;</div>
        </div>
    </div>
</aside>
<div id="post">
    <div class="pjax">
        <article id="post-Nest01" class="article article-type-post" itemscope itemprop="blogPost">
    
        <h1 class="article-title">01TS核心概念</h1>
    
    <div class="article-meta">
        
        
        
        <span class="book">
            <i class="iconfont icon-category"></i>
            
            
            <a  data-rel="前端">前端</a> > 
            
            <a  data-rel="前端&lt;---&gt;Nest">Nest</a>
            
        </span>
        
        
        <span class="tag">
            <i class="iconfont icon-tag"></i>
            
            <a class="color3">前端</a>
            
            <a class="color5">Nest</a>
            
        </span>
        
    </div>
    <div class="article-meta">
        
            发布时间 : <time class="date" title='最后更新: 2023-07-21 15:01:51'>2023-08-01 00:00</time>
        
    </div>
    <div class="article-meta">
        
        
        <span id="busuanzi_container_page_pv">
            阅读 :<span id="busuanzi_value_page_pv">
                <span class="count-comment">
                    <span class="spinner">
                      <div class="cube1"></div>
                      <div class="cube2"></div>
                    </span>
                </span>
            </span>
        </span>
        
        
    </div>
    
    <div class="toc-ref">
    
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#00-%E5%9F%BA%E7%A1%80"><span class="toc-text">00 基础</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8E%9F%E5%9E%8B%E9%93%BE"><span class="toc-text">原型链</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#apply-call-bind%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-text">apply, call, bind的区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%9B%E5%9E%8B"><span class="toc-text">泛型</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#01%E8%A3%85%E9%A5%B0%E5%99%A8"><span class="toc-text">01装饰器</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A3%85%E9%A5%B0%E5%99%A8%E7%B1%BB%E5%9E%8B"><span class="toc-text">装饰器类型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B1%BB%E8%A3%85%E9%A5%B0%E5%99%A8"><span class="toc-text">类装饰器</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8"><span class="toc-text">基础使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A3%85%E9%A5%B0%E5%99%A8%E4%BC%A0%E5%8F%82"><span class="toc-text">装饰器传参</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%B6%E4%BB%96%E7%94%A8%E6%B3%95"><span class="toc-text">其他用法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B1%9E%E6%80%A7%E8%A3%85%E9%A5%B0%E5%99%A8"><span class="toc-text">属性装饰器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E8%A3%85%E9%A5%B0%E5%99%A8"><span class="toc-text">方法装饰器</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B1%9E%E6%80%A7%E6%8F%8F%E8%BF%B0%E7%AC%A6"><span class="toc-text">属性描述符</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%82%E6%95%B0%E8%A3%85%E9%A5%B0%E5%99%A8"><span class="toc-text">参数装饰器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BF%E9%97%AE%E8%A3%85%E9%A5%B0%E5%99%A8"><span class="toc-text">访问装饰器</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A3%85%E9%A5%B0%E5%99%A8%E5%86%99%E6%B3%95"><span class="toc-text">装饰器写法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%A7%E6%89%BF%E6%B3%95"><span class="toc-text">继承法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8E%9F%E5%9E%8B%E6%B3%95"><span class="toc-text">原型法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B5%8B%E5%80%BC%E6%B3%95"><span class="toc-text">赋值法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B1%95%E5%BC%80%E6%B3%95"><span class="toc-text">展开法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%83%E4%BF%A1%E6%81%AF%E5%8F%8D%E5%B0%84-API"><span class="toc-text">元信息反射 API</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E7%94%A8%E6%B3%95"><span class="toc-text">基础用法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A2%84%E5%AE%9A%E4%B9%89%E5%85%83%E4%BF%A1%E6%81%AF"><span class="toc-text">预定义元信息</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%85%83%E6%95%B0%E6%8D%AE"><span class="toc-text">自定义元数据</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%84%E5%90%88%E4%B8%8E%E9%A1%BA%E5%BA%8F"><span class="toc-text">组合与顺序</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E7%BB%84%E8%A3%85%E9%A5%B0%E5%99%A8"><span class="toc-text">多组装饰器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B0%83%E7%94%A8%E9%A1%BA%E5%BA%8F"><span class="toc-text">调用顺序</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#02-%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5"><span class="toc-text">02 核心概念</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9B%B4%E6%8D%A2http%E9%A9%B1%E5%8A%A8"><span class="toc-text">更换http驱动</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8E%A7%E5%88%B6%E5%99%A8%E8%AF%A6%E8%A7%A3"><span class="toc-text">控制器详解</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A7%E5%88%B6%E5%99%A8%E5%AE%9A%E4%B9%89"><span class="toc-text">控制器定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E6%96%B9%E6%B3%95"><span class="toc-text">请求方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E5%AF%B9%E8%B1%A1"><span class="toc-text">请求对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DTO%E4%B8%8E%E6%95%B0%E6%8D%AE%E9%AA%8C%E8%AF%81"><span class="toc-text">DTO与数据验证</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#class-validator"><span class="toc-text">class-validator</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8F%90%E4%BE%9B%E8%80%85-Provider"><span class="toc-text">提供者 Provider</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95"><span class="toc-text">基本用法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%A8%E5%86%8C%E4%B8%8E%E5%AF%BC%E5%87%BA"><span class="toc-text">注册与导出</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8F%90%E4%BE%9B%E8%80%85"><span class="toc-text">自定义提供者</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BE%AA%E7%8E%AF%E4%BE%9D%E8%B5%96"><span class="toc-text">循环依赖</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%A8%E5%85%A5%E8%8C%83%E5%9B%B4"><span class="toc-text">注入范围</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97"><span class="toc-text">模块</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B1%E4%BA%AB%E6%A8%A1%E5%9D%97"><span class="toc-text">共享模块</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E6%A8%A1%E5%9D%97"><span class="toc-text">全局模块</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E6%A8%A1%E5%9D%97"><span class="toc-text">动态模块</span></a></li></ol></li></ol></li></ol>
    
<style>
    .left-col .switch-btn,
    .left-col .switch-area {
        display: none;
    }
    .toc-level-3 i,
    .toc-level-3 ol {
        display: none !important;
    }
</style>
</div>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="00-基础"><a href="#00-基础" class="headerlink" title="00 基础"></a>00 基础</h1><h3 id="原型链"><a href="#原型链" class="headerlink" title="原型链"></a>原型链</h3><p>原型链是JavaScript中的一个重要概念，它描述了对象之间的继承关系。在JavaScript中，每个对象都有一个原型（prototype），并且可以通过原型链来访问和继承其他对象的属性和方法。</p>
<p>当我们访问一个对象的属性或方法时，如果该对象本身没有定义这个属性或方法，JavaScript会沿着原型链向上查找，直到找到对应的属性或方法或者到达原型链的顶端（即Object.prototype）为止。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> parent = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;Parent&quot;</span>,</span><br><span class="line">  <span class="attr">sayHello</span>: <span class="keyword">function</span>(<span class="params"></span>) v</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Hello, &quot;</span> + <span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 定义一个子对象，并将其原型设置为父对象</span></span><br><span class="line"><span class="keyword">var</span> child = <span class="title class_">Object</span>.<span class="title function_">create</span>(parent);</span><br><span class="line"><span class="comment">// 子对象没有定义sayHello方法，但可以通过原型链访问到父对象的方法</span></span><br><span class="line">child.<span class="title function_">sayHello</span>(); <span class="comment">// 输出：Hello, Child</span></span><br></pre></td></tr></table></figure>

<h3 id="apply-call-bind的区别"><a href="#apply-call-bind的区别" class="headerlink" title="apply, call, bind的区别"></a>apply, call, bind的区别</h3><p>apply、call和bind都是JavaScript中用于改变函数执行上下文（即this指向）的方法，它们之间有一些区别: </p>
<ul>
<li>call和apply用于立即调用函数并指定函数执行时的上下文和参数，区别是使用call方法时，参数需要一个个传递；而使用apply方法时，参数以数组的形式传递。</li>
<li>bind用于创建一个新函数，并将原函数绑定到指定的上下文上，返回的新函数可以稍后被调用。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">greet</span>(<span class="params">name</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Hello, &quot;</span> + name);</span><br><span class="line">&#125;</span><br><span class="line">greet.<span class="title function_">call</span>(<span class="literal">null</span>, <span class="string">&quot;Alice&quot;</span>); <span class="comment">// 使用call方法传递参数</span></span><br><span class="line">greet.<span class="title function_">apply</span>(<span class="literal">null</span>, [<span class="string">&quot;Bob&quot;</span>]); <span class="comment">// 使用apply方法传递参数</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> greetPerson = greet.<span class="title function_">bind</span>(<span class="literal">null</span>, <span class="string">&quot;Alice&quot;</span>); <span class="comment">// 绑定上下文和部分参数</span></span><br><span class="line"><span class="title function_">greetPerson</span>(); <span class="comment">// 调用新函数</span></span><br></pre></td></tr></table></figure>

<p>注意：当使用call、apply或bind时，如果传递的第一个参数为null或undefined，则默认上下文会指向全局对象（在浏览器中为window对象）。</p>
<h3 id="泛型"><a href="#泛型" class="headerlink" title="泛型"></a>泛型</h3><p>泛型（Generics）是一种通用的编程概念，在定义函数、类或接口时使用类型参数，以便在使用时指定具体的类型。</p>
<p>常见场景：</p>
<ol>
<li>函数泛型：在函数定义中使用类型参数来表示参数类型或返回值类型的占位符。</li>
<li>类泛型：可以在类定义中使用类型参数来表示类的属性类型、方法参数类型或返回值类型的占位符。</li>
<li>接口泛型：可以在接口定义中使用类型参数来表示接口的属性类型、方法参数类型或返回值类型的占位符。</li>
</ol>
<p>示例：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> identity&lt;T&gt;(<span class="attr">arg</span>: T): T &#123;</span><br><span class="line">  <span class="keyword">return</span> arg;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//匿名函数泛型</span></span><br><span class="line"><span class="keyword">let</span> identity = &lt;T&gt;(<span class="attr">arg</span>: T): <span class="function"><span class="params">T</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> arg;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> result = identity&lt;string&gt;(<span class="string">&quot;Hello&quot;</span>); <span class="comment">// 显式指定</span></span><br><span class="line"><span class="keyword">const</span> result = <span class="title function_">identity</span>(<span class="string">&quot;Hello&quot;</span>); <span class="comment">// 隐式推断</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result); <span class="comment">// 输出 &quot;Hello&quot;</span></span><br></pre></td></tr></table></figure>

<p>大多数情况可以省略类型参数的显式指定，让 JavaScript 根据上下文进行类型推断。只有在无法推断出类型参数的情况下，才需要使用 <code>&lt;string&gt;</code> 或其他类型参数来明确指定类型。</p>
<h1 id="01装饰器"><a href="#01装饰器" class="headerlink" title="01装饰器"></a>01装饰器</h1><blockquote>
<p>装饰器是一种特殊类型的声明，它能够被附加到类声明、方法、 访问符、属性或参数上。</p>
</blockquote>
<p>装饰器使用 <code>@expression</code> 这种形式，<code>expression</code> 求值后必须为一个函数。它会在运行时被调用，被装饰的声明信息做为参数传入。</p>
<p>NestJS开启装饰器特性：tsconfig.json</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;compilerOptions&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;experimentalDecorators&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&quot;emitDecoratorMetadata&quot;</span>: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>高阶函数模拟装饰器模式：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">type <span class="title class_">DecoratorFunc</span> = <span class="function">(<span class="params"></span></span></span><br><span class="line"><span class="params"><span class="function">    target: any,</span></span></span><br><span class="line"><span class="params"><span class="function">    key: string,</span></span></span><br><span class="line"><span class="params"><span class="function">    descriptor: PropertyDescriptor,</span></span></span><br><span class="line"><span class="params"><span class="function"></span>) =&gt;</span> <span class="keyword">void</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 模拟的装饰器工厂函数</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">createDecorator</span> =</span><br><span class="line">    (<span class="params">decorator: DecoratorFunc</span>) =&gt; <span class="function">(<span class="params">Model: any, key: string</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// 获取即将使用装饰器的类原型</span></span><br><span class="line">        <span class="keyword">const</span> target = <span class="title class_">Model</span>.<span class="property"><span class="keyword">prototype</span></span>;</span><br><span class="line">        <span class="comment">// 获取这个原型上某个方法的描述</span></span><br><span class="line">        <span class="keyword">const</span> descriptor = <span class="title class_">Object</span>.<span class="title function_">getOwnPropertyDescriptor</span>(target, key);</span><br><span class="line">        <span class="comment">// 更改描述,生成新的方法</span></span><br><span class="line">        <span class="title function_">decorator</span>(target, key, descriptor);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">logger</span>: <span class="title class_">DecoratorFunc</span> = <span class="function">(<span class="params">target, key, descriptor</span>) =&gt;</span></span><br><span class="line">    <span class="comment">// 将修改后的函数重新定义到原型链上</span></span><br><span class="line">    <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(target, key, &#123;</span><br><span class="line">        ...descriptor,</span><br><span class="line">        <span class="attr">value</span>: <span class="keyword">async</span> (...<span class="attr">args</span>: any[]) =&gt; &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> descriptor.<span class="property">value</span>.<span class="title function_">apply</span>(<span class="variable language_">this</span>, args); <span class="comment">// 调用之前的函数</span></span><br><span class="line">            &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                <span class="keyword">const</span> now = <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">valueOf</span>();</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`lasted logged in <span class="subst">$&#123;now&#125;</span>`</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">login</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;login success&#x27;</span>);</span><br><span class="line">        <span class="keyword">await</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">setTimeout</span>(resolve, <span class="number">100</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">exp1</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>();</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(</span><br><span class="line">        <span class="string">&#x27;-----------------------示例1:高阶函数柯里化(装饰器内部原理)-----------------------&#x27;</span>,</span><br><span class="line">    );</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(</span><br><span class="line">        <span class="string">&#x27;-----------------------实现登录和日志记录解耦-----------------------&#x27;</span>,</span><br><span class="line">    );</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>();</span><br><span class="line">    <span class="keyword">const</span> loggerDecorator = <span class="title function_">createDecorator</span>(logger);</span><br><span class="line">    <span class="title function_">loggerDecorator</span>(<span class="title class_">User</span>, <span class="string">&#x27;login&#x27;</span>);</span><br><span class="line">    <span class="keyword">const</span> user = <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">    user.<span class="title function_">login</span>();</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>();</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;-----------------------示例1:执行完毕-----------------------&#x27;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 控制台输出</span></span><br><span class="line"><span class="comment">// login success</span></span><br><span class="line"><span class="comment">// 停顿100ms</span></span><br><span class="line"><span class="comment">// lasted logged in 1571771681793</span></span><br></pre></td></tr></table></figure>

<p>高阶函数：能够接受一个或多个函数作为参数，并/或者返回一个新函数的函数。</p>
<h2 id="装饰器类型"><a href="#装饰器类型" class="headerlink" title="装饰器类型"></a>装饰器类型</h2><ul>
<li>类装饰器</li>
<li>属性装饰器</li>
<li>访问符装饰器</li>
<li>属性装饰器</li>
<li>类装饰器</li>
</ul>
<h3 id="类装饰器"><a href="#类装饰器" class="headerlink" title="类装饰器"></a>类装饰器</h3><blockquote>
<p>类装饰器是把本身的类传入装饰器注解中，并对这个类或类的原型进行一些处理</p>
</blockquote>
<h4 id="基础使用"><a href="#基础使用" class="headerlink" title="基础使用"></a>基础使用</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">HelloDerorator</span> = &lt;T <span class="keyword">extends</span> <span class="keyword">new</span> (...<span class="attr">args</span>: any[]) =&gt; any&gt;<span class="function">(<span class="params"></span></span></span><br><span class="line"><span class="params"><span class="function">    constructor: T,</span></span></span><br><span class="line"><span class="params"><span class="function"></span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">class</span> <span class="title class_">extends</span> constructor &#123;</span><br><span class="line">        newProperty = <span class="string">&#x27;new property&#x27;</span>;</span><br><span class="line"></span><br><span class="line">        hello = <span class="string">&#x27;override&#x27;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="title function_">sayHello</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">hello</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">@<span class="title class_">HelloDerorator</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">Hello</span> &#123;</span><br><span class="line">    [<span class="attr">key</span>: string]: any; <span class="comment">// 此处用于防止eslint提示sayHello方法不存在</span></span><br><span class="line">    <span class="attr">hello</span>: string;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">hello</span> = <span class="string">&#x27;test&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> hello = <span class="keyword">new</span> <span class="title class_">Hello</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(hello.<span class="title function_">sayHello</span>()); <span class="comment">// 控制台打印 override</span></span><br></pre></td></tr></table></figure>

<h4 id="装饰器传参"><a href="#装饰器传参" class="headerlink" title="装饰器传参"></a>装饰器传参</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">SetNameDecorator</span> = (<span class="params">firstname: string, lastname: string</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> name = <span class="string">`<span class="subst">$&#123;firstname&#125;</span>.<span class="subst">$&#123;lastname&#125;</span>`</span>;</span><br><span class="line">    <span class="keyword">return</span> &lt;T <span class="keyword">extends</span> <span class="keyword">new</span> (...<span class="attr">args</span>: any[]) =&gt; any&gt;<span class="function">(<span class="params">target: T</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">class</span> <span class="title class_">extends</span> target &#123;</span><br><span class="line">            <span class="attr">_name</span>: string = name;</span><br><span class="line"></span><br><span class="line">            <span class="title function_">getMyName</span>(<span class="params"></span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">_name</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">@<span class="title class_">SetNameDecorator</span>(<span class="string">&#x27;jesse&#x27;</span>, <span class="string">&#x27;pincman&#x27;</span>)</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="title function_">c</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> user = <span class="keyword">new</span> <span class="title class_">UserService</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(user.<span class="title function_">getMyName</span>()); <span class="comment">// 控制台打印 jesse.pincman</span></span><br></pre></td></tr></table></figure>

<h4 id="其他用法"><a href="#其他用法" class="headerlink" title="其他用法"></a>其他用法</h4><p>还可以对类原型链 <code>prototype</code> 上的属性或者方法和类本身的静态属性和方法进行赋值或重载，或重载构造函数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">type <span class="title class_">UserProfile</span> = <span class="title class_">Record</span>&lt;string, any&gt; &amp; &#123;</span><br><span class="line">    phone?: number;</span><br><span class="line">    address?: string;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">ProfileDecorator</span> = (<span class="params">profile: UserProfile</span>) =&gt; <span class="function">(<span class="params">target: any</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> <span class="title class_">Original</span> = target;</span><br><span class="line">    <span class="keyword">let</span> userinfo = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="title class_">Object</span>.<span class="title function_">keys</span>(profile).<span class="title function_">forEach</span>(<span class="function">(<span class="params">key</span>) =&gt;</span> &#123;</span><br><span class="line">        userinfo = <span class="string">`<span class="subst">$&#123;userinfo&#125;</span>.<span class="subst">$&#123;profile[key].toString()&#125;</span>`</span>;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">// 添加一个原型属性</span></span><br><span class="line">    <span class="title class_">Original</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">userinfo</span> = userinfo;</span><br><span class="line">    <span class="comment">// 使用函数创建一个新的类(类构造器),返回值为传入类的对象,这样就重载了构造函数</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">constructor</span>(<span class="params">...args: any[]</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;contruct has been changed&#x27;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Original</span>(...args);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 赋值原型链</span></span><br><span class="line">    constructor.<span class="property"><span class="keyword">prototype</span></span> = <span class="title class_">Original</span>.<span class="property"><span class="keyword">prototype</span></span>;</span><br><span class="line">    <span class="comment">// 添加一个静态属性</span></span><br><span class="line">    constructor.<span class="property">myinfo</span> = <span class="string">`myinfo <span class="subst">$&#123;userinfo&#125;</span>`</span>;</span><br><span class="line">    <span class="keyword">return</span> constructor <span class="keyword">as</span> <span class="keyword">typeof</span> <span class="title class_">Original</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 因为静态属性是无法通过[key: string]: any;获取类型提示的,所以这里添加一个接口用于动态各类添加静态属性</span></span><br><span class="line">interface <span class="title class_">StaticUser</span> &#123;</span><br><span class="line">    <span class="keyword">new</span> (): <span class="title class_">UserProfile</span>;</span><br><span class="line">    <span class="attr">myinfo</span>: string;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@<span class="title class_">ProfileDecorator</span>(&#123; <span class="attr">phone</span>: <span class="number">133</span>, <span class="attr">address</span>: <span class="string">&#x27;zhejiang&#x27;</span> &#125;)</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ProfileService</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>((<span class="title class_">ProfileService</span> <span class="keyword">as</span> unknown <span class="keyword">as</span> <span class="title class_">StaticUser</span>).<span class="property">myinfo</span>); <span class="comment">// myinfo .133.zhejiang</span></span><br><span class="line"><span class="keyword">const</span> profile = <span class="keyword">new</span> <span class="title class_">ProfileService</span>(); <span class="comment">// contruct has been changed</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>((profile <span class="keyword">as</span> any).<span class="property">userinfo</span>); <span class="comment">// .133.zhejiang</span></span><br></pre></td></tr></table></figure>

<h3 id="属性装饰器"><a href="#属性装饰器" class="headerlink" title="属性装饰器"></a><strong>属性装饰器</strong></h3><p>属性装饰器一般不单独使用，主要用于配合类或方法装饰器进行组合装饰</p>
<p>属性装饰器函数有两个参数：</p>
<ul>
<li> <strong>target</strong></li>
<li>对于普通属性，<em>target</em> 就是当前对象的原型，如<code>Employee.prototype</code></li>
<li>对于静态属性，<em>target</em> 就是当前对象的类</li>
<li><strong>propertyKey</strong> 属性的名称</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="attr">userRoles</span>: string[] = [];</span><br><span class="line"><span class="comment">// 通过属性装饰器把角色赋值给userRoles</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">RoleDecorator</span> = (<span class="params">roles: string[]</span>) =&gt; <span class="function">(<span class="params">target: any, key: string</span>) =&gt;</span> &#123;</span><br><span class="line">    roles.<span class="title function_">forEach</span>(<span class="function">(<span class="params">role</span>) =&gt;</span> userRoles.<span class="title function_">push</span>(role));</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 根据userRoles生成Roles对象并赋值给类原型的roles属性</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">SetRoleDecorator</span> = &lt;</span><br><span class="line">    T <span class="keyword">extends</span> <span class="keyword">new</span> (...<span class="attr">args</span>: any[]) =&gt; &#123;</span><br><span class="line">        [<span class="attr">key</span>: string]: any;</span><br><span class="line">    &#125;,</span><br><span class="line">    &gt;<span class="function">(<span class="params"></span></span></span><br><span class="line"><span class="params"><span class="function">    constructor: T,</span></span></span><br><span class="line"><span class="params"><span class="function"></span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> roles = [</span><br><span class="line">        &#123; <span class="attr">name</span>: <span class="string">&#x27;super-admin&#x27;</span>, <span class="attr">desc</span>: <span class="string">&#x27;超级管理员&#x27;</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">name</span>: <span class="string">&#x27;admin&#x27;</span>, <span class="attr">desc</span>: <span class="string">&#x27;管理员&#x27;</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">name</span>: <span class="string">&#x27;user&#x27;</span>, <span class="attr">desc</span>: <span class="string">&#x27;普通用户&#x27;</span> &#125;,</span><br><span class="line">    ];</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">class</span> <span class="title class_">extends</span> constructor &#123;</span><br><span class="line">        <span class="title function_">constructor</span>(<span class="params">...args: any</span>) &#123;</span><br><span class="line">            <span class="variable language_">super</span>(...args);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">roles</span> = roles.<span class="title function_">filter</span>(<span class="function">(<span class="params">role</span>) =&gt;</span> userRoles.<span class="title function_">includes</span>(role.<span class="property">name</span>));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">@<span class="title class_">SetRoleDecorator</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserEntity</span> &#123;</span><br><span class="line">    @<span class="title class_">RoleDecorator</span>([<span class="string">&#x27;admin&#x27;</span>, <span class="string">&#x27;user&#x27;</span>])</span><br><span class="line">    <span class="attr">roles</span>: string[] = [];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> user = <span class="keyword">new</span> <span class="title class_">UserEntity</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(user.<span class="property">roles</span>); </span><br><span class="line"><span class="comment">// [ &#123; name: &#x27;admin&#x27;, desc: &#x27;管理员&#x27; &#125;, &#123; name: &#x27;user&#x27;, desc: &#x27;普通用户&#x27; &#125; ]</span></span><br></pre></td></tr></table></figure>

<h3 id="方法装饰器"><a href="#方法装饰器" class="headerlink" title="方法装饰器"></a>方法装饰器</h3><blockquote>
<p>方法装饰器重载的时候需要注意的一点是定义 <em>value</em> 务必使用 <em>function</em>，而不是箭头函数。因为我们在调用原始的旧方法使用会使用到 <em>this</em>，如：*method.apply(this, args)*，这里的 <em>this</em> 指向需要 <em>function</em> 来定义。</p>
</blockquote>
<p>方法装饰器接受三个参数：</p>
<ul>
<li><strong>target</strong> : 对于静态成员来说是类的构造函数，对于实例成员是类的原型对象。</li>
<li> <strong>key</strong> 方法名称 </li>
<li><strong>descriptor: PropertyDescriptor</strong> 方法的属性描述符（最重要的参数）</li>
</ul>
<h4 id="属性描述符"><a href="#属性描述符" class="headerlink" title="属性描述符"></a><strong>属性描述符</strong></h4><p>属性描述包含以下几个属性</p>
<ul>
<li><em>configurable?: boolean;</em> 能否使用delete、能否修改方法特性或修改访问器属性</li>
<li><em>enumerable?: boolean;</em> 是否在遍历对象的时候存在</li>
<li><em>value?: any;</em> 用于定义新的方法代替旧方法</li>
<li><em>writable?: boolean;</em> 是否可写</li>
<li><em>get?(): any;</em> 访问器</li>
<li><em>set?(v: any): void;</em> 访问器</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">loggerDecorator</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span> <span class="title function_">logMethod</span>(<span class="params"></span></span><br><span class="line"><span class="params">        target: any,</span></span><br><span class="line"><span class="params">        propertyName: string,</span></span><br><span class="line"><span class="params">        propertyDescriptor: PropertyDescriptor,</span></span><br><span class="line"><span class="params">    </span>): <span class="title class_">PropertyDescriptor</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> method = propertyDescriptor.<span class="property">value</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 重载方法</span></span><br><span class="line">        propertyDescriptor.<span class="property">value</span> = <span class="keyword">function</span> <span class="title function_">async</span>(<span class="params">...args: any[]</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> method.<span class="title function_">apply</span>(<span class="variable language_">this</span>, args); <span class="comment">// 调用之前的函数</span></span><br><span class="line">            &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                <span class="keyword">const</span> now = <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">valueOf</span>();</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`lasted logged in <span class="subst">$&#123;now&#125;</span>`</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">return</span> propertyDescriptor;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    @<span class="title function_">loggerDecorator</span>()</span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">login</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;login success&#x27;</span>);</span><br><span class="line">        <span class="keyword">await</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">setTimeout</span>(resolve, <span class="number">100</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> user = <span class="keyword">new</span> <span class="title class_">UserService</span>();</span><br><span class="line">user.<span class="title function_">login</span>();</span><br><span class="line"><span class="comment">// 控制台输出</span></span><br><span class="line"><span class="comment">// login success</span></span><br><span class="line"><span class="comment">// 停顿100ms</span></span><br><span class="line"><span class="comment">// lasted logged in 1571771681793</span></span><br></pre></td></tr></table></figure>

<h3 id="参数装饰器"><a href="#参数装饰器" class="headerlink" title="参数装饰器"></a>参数装饰器</h3><blockquote>
<p>参数装饰器一般不单独使用，而是配合类或方法装饰器组合使用</p>
</blockquote>
<p>参数：</p>
<ol>
<li><em>target</em> 对于静态成员来说是类的构造函数，对于实例成员是类的原型对象。</li>
<li><em>key</em> 方法名称</li>
<li><em>index</em> 参数数组中的位置</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 参数格式化配置</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">parseConf</span>: (<span class="function">(<span class="params">...args: any[]</span>) =&gt;</span> any)[] = [];</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">parse</span> =</span><br><span class="line">    (<span class="params">parseTo: (...args: any[]) =&gt; any</span>) =&gt;</span><br><span class="line">    <span class="function">(<span class="params">target: any, propertyName: string, index: number</span>) =&gt;</span> &#123;</span><br><span class="line">        parseConf[index] = parseTo;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在函数调用前执行格式化操作</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> parseDecorator = (</span><br><span class="line">    <span class="attr">target</span>: any,</span><br><span class="line">    <span class="attr">propertyName</span>: string,</span><br><span class="line">    <span class="attr">descriptor</span>: <span class="title class_">PropertyDescriptor</span>,</span><br><span class="line">): <span class="function"><span class="params">PropertyDescriptor</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;开始格式化数据&#x27;</span>);</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        ...descriptor,</span><br><span class="line">        <span class="title function_">value</span>(<span class="params">...args: any[]</span>) &#123;</span><br><span class="line">            <span class="comment">// 获取格式化后的参数列表</span></span><br><span class="line">            <span class="keyword">const</span> newArgs = args.<span class="title function_">map</span>(<span class="function">(<span class="params">v, i</span>) =&gt;</span></span><br><span class="line">                parseConf[i] ? parseConf[i](v) : v,</span><br><span class="line">            );</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;格式化完毕&#x27;</span>);</span><br><span class="line">            <span class="keyword">return</span> descriptor.<span class="property">value</span>.<span class="title function_">apply</span>(<span class="variable language_">this</span>, newArgs);</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> interface <span class="title class_">UserType</span> &#123;</span><br><span class="line">    <span class="attr">id</span>: number;</span><br><span class="line">    <span class="attr">username</span>: string;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    private <span class="attr">users</span>: <span class="title class_">UserType</span>[] = [</span><br><span class="line">        &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">username</span>: <span class="string">&#x27;admin&#x27;</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">username</span>: <span class="string">&#x27;pincman&#x27;</span> &#125;,</span><br><span class="line">    ];</span><br><span class="line"></span><br><span class="line">    <span class="title function_">getUsers</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">users</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @parseDecorator</span><br><span class="line">    <span class="title function_">delete</span>(<span class="params">@parse((arg: any) =&gt; <span class="built_in">Number</span>(arg)) id: number</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">users</span> = <span class="variable language_">this</span>.<span class="property">users</span>.<span class="title function_">filter</span>(<span class="function">(<span class="params">userObj</span>) =&gt;</span> userObj.<span class="property">id</span> !== id);</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> userService = <span class="keyword">new</span> <span class="title class_">UserService</span>();</span><br><span class="line">userService.<span class="title function_">delete</span>(<span class="number">1</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(userService.<span class="title function_">getUsers</span>());</span><br><span class="line"><span class="comment">// 控制台输出: [ &#123; id: 2, username: &#x27;pincman&#x27; &#125; ]</span></span><br></pre></td></tr></table></figure>

<h3 id="访问装饰器"><a href="#访问装饰器" class="headerlink" title="访问装饰器"></a>访问装饰器</h3><p>添加了<code>get</code>,<code>set</code>前缀的方法，用于使用调用属性的方式获取和设置一些属性的方法。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">HiddenDecorator</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function">(<span class="params"></span></span></span><br><span class="line"><span class="params"><span class="function">        target: any,</span></span></span><br><span class="line"><span class="params"><span class="function">        propertyName: string,</span></span></span><br><span class="line"><span class="params"><span class="function">        descriptor: PropertyDescriptor,</span></span></span><br><span class="line"><span class="params"><span class="function">    </span>) =&gt;</span> &#123;</span><br><span class="line">        descriptor.<span class="property">enumerable</span> = <span class="literal">false</span>; <span class="comment">//是否可枚举</span></span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">PrefixDecorator</span> = (<span class="params">prefix: string</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function">(<span class="params"></span></span></span><br><span class="line"><span class="params"><span class="function">        target: any,</span></span></span><br><span class="line"><span class="params"><span class="function">        propertyName: string,</span></span></span><br><span class="line"><span class="params"><span class="function">        descriptor: PropertyDescriptor,</span></span></span><br><span class="line"><span class="params"><span class="function">    </span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            ...descriptor,</span><br><span class="line">            <span class="title function_">set</span>(<span class="params">value: string</span>) &#123;</span><br><span class="line">                descriptor.<span class="property">set</span>.<span class="title function_">apply</span>(<span class="variable language_">this</span>, [<span class="string">`<span class="subst">$&#123;prefix&#125;</span>_<span class="subst">$&#123;value&#125;</span>`</span>]);</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">UserEntity</span> &#123;</span><br><span class="line">    private <span class="attr">_nickname</span>: string;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// @ts-ignore</span></span><br><span class="line">    private <span class="attr">fullname</span>: string;</span><br><span class="line"></span><br><span class="line">    @<span class="title class_">HiddenDecorator</span>()</span><br><span class="line">    @<span class="title class_">PrefixDecorator</span>(<span class="string">&#x27;jesse_&#x27;</span>)</span><br><span class="line">    <span class="keyword">get</span> <span class="title function_">nickname</span>() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">_nickname</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">set</span> <span class="title function_">nickname</span>(<span class="params">value: string</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">_nickname</span> = value;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">fullname</span> = <span class="string">`<span class="subst">$&#123;value&#125;</span>_fullname`</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> user = <span class="keyword">new</span> <span class="title class_">UserEntity</span>();</span><br><span class="line">user.<span class="property">nickname</span> = <span class="string">&#x27;pincman&#x27;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(user);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(user.<span class="property">nickname</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 第一个console.log控制台输出,可以看到遍历对象后并没有nickname字段的值</span></span><br><span class="line"><span class="comment">// UserService &#123;</span></span><br><span class="line"><span class="comment">//  users: [ &#123; id: 1, username: &#x27;admin&#x27; &#125;, &#123; id: 2, username: &#x27;pincman&#x27; &#125; ],</span></span><br><span class="line"><span class="comment">//  roles: [],</span></span><br><span class="line"><span class="comment">//  hello: &#x27;test&#x27;,</span></span><br><span class="line"><span class="comment">//  password: &#x27;123456&#x27;,</span></span><br><span class="line"><span class="comment">//  _nickname: &#x27;gkr__lichnow&#x27;,</span></span><br><span class="line"><span class="comment">//  fullname: &#x27;gkr__lichnow_fullname&#x27;</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"><span class="comment">// 第二个console.log控制台输出</span></span><br><span class="line"><span class="comment">// gkr__lichnow</span></span><br></pre></td></tr></table></figure>

<h2 id="装饰器写法"><a href="#装饰器写法" class="headerlink" title="装饰器写法"></a>装饰器写法</h2><p>通过装饰器重载方法有许多写法</p>
<h3 id="继承法"><a href="#继承法" class="headerlink" title="继承法"></a>继承法</h3><p>一般用于类装饰器中添加属性或方法，例如：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> &lt;T <span class="keyword">extends</span> <span class="keyword">new</span> (...<span class="attr">args</span>: any[]) =&gt; any&gt;<span class="function">(<span class="params">target: T</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">class</span> <span class="title class_">extends</span> target &#123;</span><br><span class="line">      <span class="title function_">getMyName</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">_name</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;;</span><br></pre></td></tr></table></figure>

<h3 id="原型法"><a href="#原型法" class="headerlink" title="原型法"></a><strong>原型法</strong></h3><p>一般用于类装饰器上重载构造函数以及添加属性或方法，例如：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">ProfileDerorator</span> = (<span class="params">profile: UserProfile</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function">(<span class="params">target: any</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> original = target;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">constructor</span>(<span class="params">...args: any[]</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;contruct has been changed&#x27;</span>);</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="title function_">original</span>(...args);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 赋值原型链</span></span><br><span class="line">    constructor.<span class="property"><span class="keyword">prototype</span></span> = original.<span class="property"><span class="keyword">prototype</span></span>;</span><br><span class="line">    <span class="comment">// 添加一个静态属性</span></span><br><span class="line">    constructor.<span class="property">myinfo</span> = <span class="string">`myinfo <span class="subst">$&#123;userinfo&#125;</span>`</span>;</span><br><span class="line">    <span class="keyword">return</span> constructor <span class="keyword">as</span> <span class="keyword">typeof</span> original;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="赋值法"><a href="#赋值法" class="headerlink" title="赋值法"></a><strong>赋值法</strong></h3><p>一般用于方法装饰器上修改某个描述符，例如</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">loggerDecorator</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span> <span class="title function_">logMethod</span>(<span class="params"></span></span><br><span class="line"><span class="params">    target: <span class="built_in">Object</span>,</span></span><br><span class="line"><span class="params">    propertyName: string,</span></span><br><span class="line"><span class="params">    propertyDescriptor: PropertyDescriptor,</span></span><br><span class="line"><span class="params">  </span>): <span class="title class_">PropertyDescriptor</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> method = propertyDescriptor.<span class="property">value</span>;</span><br><span class="line">    <span class="comment">// 重载方法</span></span><br><span class="line">    propertyDescriptor.<span class="property">value</span> = <span class="keyword">function</span> <span class="title function_">async</span> (...<span class="attr">args</span>: any[]) &#123;...&#125;;</span><br><span class="line">    <span class="keyword">return</span> propertyDescriptor;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="展开法"><a href="#展开法" class="headerlink" title="展开法"></a><strong>展开法</strong></h3><p>与赋值法类似，只不过使用ES6+的展开语法，更容易理解和使用，例如</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> parseFunc = (</span><br><span class="line">  <span class="attr">target</span>: <span class="title class_">Object</span>,</span><br><span class="line">  <span class="attr">propertyName</span>: string,</span><br><span class="line">  <span class="attr">descriptor</span>: <span class="title class_">PropertyDescriptor</span>,</span><br><span class="line">): <span class="function"><span class="params">PropertyDescriptor</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    ...descriptor,</span><br><span class="line">    <span class="title function_">value</span>(<span class="params">...args: any[]</span>) &#123;</span><br><span class="line">      <span class="comment">// 获取格式化后的参数列表</span></span><br><span class="line">      <span class="keyword">const</span> newArgs = parseConf.<span class="title function_">map</span>(<span class="function">(<span class="params">toParse, index</span>) =&gt;</span> <span class="title function_">toParse</span>(args[index]));</span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> descriptor.<span class="property">value</span>.<span class="title function_">apply</span>(<span class="variable language_">this</span>, newArgs);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="元信息反射-API"><a href="#元信息反射-API" class="headerlink" title="元信息反射 API"></a>元信息反射 API</h2><p>在 TypeScript 中，元数据（Metadata）是指关于类、属性、方法等实体的附加信息。TypeScript 提供了一些内置的装饰器和反射 API 来处理元数据。</p>
<p>元信息反射 API（Metadata Reflection API）是一种在 TypeScript 中用于获取和操作装饰器元数据的功能。它允许开发者在运行时访问和操作装饰器中定义的元数据。</p>
<p>在 TypeScript 中，装饰器可以使用 <code>Reflect.metadata</code> 方法来添加元数据到类、属性或方法上。然后，通过使用元信息反射 API，可以在运行时获取这些元数据。</p>
<h3 id="基础用法"><a href="#基础用法" class="headerlink" title="基础用法"></a>基础用法</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  @<span class="title class_">Reflect</span>.<span class="title function_">metadata</span>(<span class="string">&quot;category&quot;</span>, <span class="string">&quot;human&quot;</span>) <span class="comment">// 将 &quot;human&quot; 添加为 name 属性的元数据</span></span><br><span class="line">  <span class="attr">name</span>: string;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">name: string</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 获取元数据</span></span><br><span class="line"><span class="keyword">const</span> metadata = <span class="title class_">Reflect</span>.<span class="title function_">getMetadata</span>(<span class="string">&quot;category&quot;</span>, <span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>, <span class="string">&quot;name&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(metadata); <span class="comment">// 输出 &quot;human&quot;</span></span><br></pre></td></tr></table></figure>

<p>在 TypeScript 中，<code>Reflect.getMetadata</code> 方法用于获取已添加的元数据。它接受三个参数：</p>
<ol>
<li><code>metadataKey</code>：表示要获取的元数据的键。这是一个任意类型的值，通常是一个字符串或符号。</li>
<li><code>target</code>：表示包含元数据的目标对象。可以是类的原型对象、属性所属的类的原型对象，或者方法所属的类的原型对象。<code>Person.prototype</code>是Person类的原型对象。</li>
<li><code>propertyKey</code>（可选）：表示要获取元数据的属性的名称。仅当获取属性上的元数据时才需要提供。</li>
</ol>
<h3 id="预定义元信息"><a href="#预定义元信息" class="headerlink" title="预定义元信息"></a>预定义元信息</h3><p>预定义元信息是指一些已经定义好的、常用的元信息，例如类名、属性名、方法名等。</p>
<ul>
<li>类型元信息:  <code>design:type</code>。</li>
<li>参数类型元信息:  <code>design:paramtypes</code>。</li>
<li>返回类型元信息:  <code>design:returntype</code>。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;reflect-metadata&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; parse, parseDecorator, <span class="title class_">UserType</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./exp7-8&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Point</span> &#123;</span><br><span class="line">    <span class="attr">x</span>: number;</span><br><span class="line">    <span class="attr">y</span>: number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Line</span> &#123;</span><br><span class="line">    private <span class="attr">_p0</span>: <span class="title class_">Point</span>;</span><br><span class="line">    private <span class="attr">_p1</span>: <span class="title class_">Point</span>;</span><br><span class="line">    @validate</span><br><span class="line">    <span class="comment">// 这句可以省略,因为design:type是预定义属性</span></span><br><span class="line">    <span class="comment">// @Reflect.metadata(&#x27;design:type&#x27;, Point)</span></span><br><span class="line">    <span class="keyword">set</span> <span class="title function_">p0</span>(<span class="params">value: Point</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">_p0</span> = value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">get</span> <span class="title function_">p0</span>() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">_p0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @validate</span><br><span class="line">    <span class="comment">// @Reflect.metadata(&quot;design:type&quot;, Point)</span></span><br><span class="line">    <span class="keyword">set</span> <span class="title function_">p1</span>(<span class="params">value: Point</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">_p1</span> = value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">get</span> <span class="title function_">p1</span>() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">_p1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> validate&lt;T&gt;(</span><br><span class="line">    <span class="attr">target</span>: any,</span><br><span class="line">    <span class="attr">propertyKey</span>: string,</span><br><span class="line">    <span class="attr">descriptor</span>: <span class="title class_">TypedPropertyDescriptor</span>&lt;T&gt;,</span><br><span class="line">) &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; set &#125; = descriptor;</span><br><span class="line">    descriptor.<span class="property">set</span> = <span class="keyword">function</span> (<span class="params">value: T</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> type = <span class="title class_">Reflect</span>.<span class="title function_">getMetadata</span>(<span class="string">&#x27;design:type&#x27;</span>, target, propertyKey);</span><br><span class="line">        <span class="keyword">if</span> (!(value <span class="keyword">instanceof</span> type)) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">TypeError</span>(<span class="string">&#x27;Invalid type.&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        set.<span class="title function_">apply</span>(<span class="variable language_">this</span>, [value]);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> descriptor;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> line = <span class="keyword">new</span> <span class="title class_">Line</span>();</span><br><span class="line"><span class="keyword">const</span> p0 = <span class="keyword">new</span> <span class="title class_">Point</span>();</span><br><span class="line">p0.<span class="property">x</span> = <span class="number">1</span>;</span><br><span class="line">p0.<span class="property">y</span> = <span class="number">2</span>;</span><br><span class="line">line.<span class="property">p1</span> = p0;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(line);</span><br><span class="line"><span class="comment">// 控制台输出: Line &#123; _p1: Point &#123; x: 1, y: 2 &#125; &#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="自定义元数据"><a href="#自定义元数据" class="headerlink" title="自定义元数据"></a>自定义元数据</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 角色守卫</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">RoleGuardDecorator</span> = (<span class="params">roles: string[]</span>) =&gt; &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;开始验证角色&#x27;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span> <span class="title function_">roleGuard</span>(<span class="params"></span></span><br><span class="line"><span class="params">        target: any,</span></span><br><span class="line"><span class="params">        propertyKey: string,</span></span><br><span class="line"><span class="params">        descriptor: PropertyDescriptor,</span></span><br><span class="line"><span class="params">    </span>) &#123;</span><br><span class="line">        <span class="comment">// 根据传入的参数定义守卫所需的角色</span></span><br><span class="line">        <span class="title class_">Reflect</span>.<span class="title function_">defineMetadata</span>(<span class="string">&#x27;roles&#x27;</span>, roles, target, propertyKey);</span><br><span class="line">        <span class="keyword">const</span> method = descriptor.<span class="property">value</span>;</span><br><span class="line">        descriptor.<span class="property">value</span> = <span class="keyword">function</span> (<span class="params">...args: any[]</span>) &#123;</span><br><span class="line">            <span class="comment">// 获取当前用户的角色</span></span><br><span class="line">            <span class="keyword">const</span> currentRoles = target.<span class="title function_">getRoles</span>();</span><br><span class="line">            <span class="comment">// 获取我们定义的操作此方法所需的角色</span></span><br><span class="line">            <span class="keyword">const</span> needRoles = <span class="title class_">Reflect</span>.<span class="title function_">getMetadata</span>(<span class="string">&#x27;roles&#x27;</span>, target, propertyKey);</span><br><span class="line">            <span class="comment">// 判断当前用户是否拥有所需的角色,没有则抛出异常</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">const</span> role <span class="keyword">of</span> needRoles) &#123;</span><br><span class="line">                <span class="keyword">if</span> (!currentRoles.<span class="title function_">includes</span>(role)) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(</span><br><span class="line">                        <span class="string">`you have not permission to run <span class="subst">$&#123;propertyKey&#125;</span>`</span>,</span><br><span class="line">                    );</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;验证角色完毕&#x27;</span>);</span><br><span class="line">            <span class="keyword">return</span> method.<span class="title function_">apply</span>(<span class="variable language_">this</span>, args);</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">return</span> descriptor;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="组合与顺序"><a href="#组合与顺序" class="headerlink" title="组合与顺序"></a>组合与顺序</h2><p>每一个属性,参数或方法都可以使用多组装饰器。每个类型的装饰器的调用顺序也是不同的。</p>
<h3 id="多组装饰器"><a href="#多组装饰器" class="headerlink" title="多组装饰器"></a>多组装饰器</h3><p>调用步骤类似剥洋葱法，即：</p>
<ol>
<li>由上至下依次对装饰器表达式求值。</li>
<li>求值的结果会被当作函数，由下至上依次调用。</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">parseDecorator</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;开始格式化数据&#x27;</span>);</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="attr">target</span>: <span class="title class_">Object</span>,</span><br><span class="line">    <span class="attr">propertyName</span>: string,</span><br><span class="line">    <span class="attr">descriptor</span>: <span class="title class_">PropertyDescriptor</span>,</span><br><span class="line">  ): <span class="function"><span class="params">PropertyDescriptor</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      ...descriptor,</span><br><span class="line">      <span class="title function_">value</span>(<span class="params">...args: any[]</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> newArgs = parseConf.<span class="title function_">map</span>(<span class="function">(<span class="params">toParse, index</span>) =&gt;</span> <span class="title function_">toParse</span>(args[index]));</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;格式化完毕&#x27;</span>);</span><br><span class="line">        <span class="keyword">return</span> descriptor.<span class="property">value</span>.<span class="title function_">apply</span>(<span class="variable language_">this</span>, newArgs);</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">RoleGuardDecorator</span> = (<span class="params">roles: string[]</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span> <span class="title function_">roleGuard</span>(<span class="params"></span></span><br><span class="line"><span class="params">    target: any,</span></span><br><span class="line"><span class="params">    propertyKey: string,</span></span><br><span class="line"><span class="params">    descriptor: PropertyDescriptor,</span></span><br><span class="line"><span class="params">  </span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;开始验证角色&#x27;</span>);</span><br><span class="line">    ...</span><br><span class="line">    descriptor.<span class="property">value</span> = <span class="keyword">function</span>(<span class="params">...args: any[]</span>) &#123;</span><br><span class="line">      ...</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;验证角色完毕&#x27;</span>);</span><br><span class="line">      <span class="keyword">return</span> method.<span class="title function_">apply</span>(<span class="variable language_">this</span>, args);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> descriptor;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">  ...</span><br><span class="line">  @<span class="title class_">RoleGuardDecorator</span>([<span class="string">&#x27;admin&#x27;</span>])</span><br><span class="line">  <span class="comment">// 把parseDecorator改成parseDecorator()</span></span><br><span class="line">  @<span class="title function_">parseDecorator</span>()</span><br><span class="line">  <span class="title function_">getRoles</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 提供验证角色为admin</span></span><br><span class="line">    <span class="keyword">return</span> [<span class="string">&#x27;admin&#x27;</span>];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="调用顺序"><a href="#调用顺序" class="headerlink" title="调用顺序"></a><strong>调用顺序</strong></h3><p>参数-&gt;方法-&gt;get/set/属性-&gt;类装饰器</p>
<blockquote>
<p>特别需要注意的是<code>getMetadata</code>与<code>getOwnMetadata</code>的<a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/48509376/whats-the-difference-between-reflect-getmetadata-and-reflect-getownmetadata">区别</a></p>
</blockquote>
<p>每种类型的装饰器的调用顺序是不同的，具体顺序如下：</p>
<ol>
<li><em>参数装饰器</em>，然后依次是<em>方法装饰器</em>，<em>访问符装饰器</em>，或<em>属性装饰器</em>应用到每个实例成员(即类原型的成员)。</li>
<li><em>参数装饰器</em>，然后依次是<em>方法装饰器</em>，<em>访问符装饰器</em>，或<em>属性装饰器</em>应用到每个静态成员。</li>
<li><em>参数装饰器</em>应用到构造函数(即类原型)。</li>
<li><em>类装饰器</em>应用到类。</li>
</ol>
<p>例如：我们使用元信息结合方法和参数装饰器来验证参数的<em>required</em>，其调用顺序为<em>参数装饰器</em>-&gt;<em>方法装饰器</em></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 装饰器调用顺序</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">UserType</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./exp7-8&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">UserService</span> <span class="keyword">as</span> <span class="title class_">ParentUserService</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./exp9-10&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> requiredMetadataKey = <span class="title class_">Symbol</span>(<span class="string">&#x27;required&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">RequiredDecorator</span> = (<span class="params"></span></span><br><span class="line"><span class="params">    target: any,</span></span><br><span class="line"><span class="params">    propertyKey: string | symbol,</span></span><br><span class="line"><span class="params">    parameterIndex: number,</span></span><br><span class="line"><span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> <span class="attr">existingRequiredParameters</span>: number[] =</span><br><span class="line">        <span class="title class_">Reflect</span>.<span class="title function_">getOwnMetadata</span>(requiredMetadataKey, target, propertyKey) || [];</span><br><span class="line">    existingRequiredParameters.<span class="title function_">push</span>(parameterIndex);</span><br><span class="line">    <span class="title class_">Reflect</span>.<span class="title function_">defineMetadata</span>(</span><br><span class="line">        requiredMetadataKey,</span><br><span class="line">        existingRequiredParameters,</span><br><span class="line">        target,</span><br><span class="line">        propertyKey,</span><br><span class="line">    );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">ValidateDecorator</span> = (<span class="params"></span></span><br><span class="line"><span class="params">    target: any,</span></span><br><span class="line"><span class="params">    propertyName: string,</span></span><br><span class="line"><span class="params">    descriptor: TypedPropertyDescriptor&lt;(...args: any[]) =&gt; any&gt;,</span></span><br><span class="line"><span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> method = descriptor.<span class="property">value</span>;</span><br><span class="line">    descriptor.<span class="property">value</span> = <span class="keyword">function</span> (<span class="params">...args: any[]</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> <span class="attr">requiredParameters</span>: number[] = <span class="title class_">Reflect</span>.<span class="title function_">getOwnMetadata</span>(</span><br><span class="line">            requiredMetadataKey,</span><br><span class="line">            target,</span><br><span class="line">            propertyName,</span><br><span class="line">        );</span><br><span class="line">        <span class="keyword">if</span> (requiredParameters) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">const</span> parameterIndex <span class="keyword">of</span> requiredParameters) &#123;</span><br><span class="line">                <span class="keyword">if</span> (</span><br><span class="line">                    parameterIndex &gt;= args.<span class="property">length</span> ||</span><br><span class="line">                    args[parameterIndex] === <span class="literal">undefined</span></span><br><span class="line">                ) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;Missing required argument.&#x27;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> method.<span class="title function_">apply</span>(<span class="variable language_">this</span>, args);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserService</span> <span class="keyword">extends</span> <span class="title class_ inherited__">ParentUserService</span> &#123;</span><br><span class="line">    @<span class="title class_">ValidateDecorator</span></span><br><span class="line">    <span class="title function_">createUser</span>(<span class="params">@RequiredDecorator username?: string, id?: number</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> <span class="attr">ids</span>: number[] = <span class="variable language_">this</span>.<span class="property">users</span>.<span class="title function_">map</span>(<span class="function">(<span class="params">userEntity</span>) =&gt;</span> userEntity.<span class="property">id</span>);</span><br><span class="line">        <span class="keyword">const</span> <span class="attr">newUser</span>: <span class="title class_">UserType</span> = &#123;</span><br><span class="line">            <span class="comment">// 如果不提供ID参数,则新用户的ID为所有用户的最大ID + 1</span></span><br><span class="line">            <span class="attr">id</span>: id || <span class="title class_">Math</span>.<span class="title function_">max</span>(...ids) + <span class="number">1</span>,</span><br><span class="line">            <span class="comment">// 如果不提供username参数,则生成随机字符串作为用户名</span></span><br><span class="line">            <span class="attr">username</span>: username || <span class="title class_">Math</span>.<span class="title function_">random</span>().<span class="title function_">toString</span>(<span class="number">36</span>).<span class="title function_">substring</span>(<span class="number">2</span>, <span class="number">15</span>),</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">users</span>.<span class="title function_">push</span>(newUser);</span><br><span class="line">        <span class="keyword">return</span> newUser;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">exp11</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>();</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(</span><br><span class="line">        <span class="string">&#x27;-----------------------示例11:装饰器组合-----------------------&#x27;</span>,</span><br><span class="line">    );</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(</span><br><span class="line">        <span class="string">&#x27;-----------------------为username参数提供必填验证-----------------------&#x27;</span>,</span><br><span class="line">    );</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>();</span><br><span class="line">    <span class="keyword">const</span> user = <span class="keyword">new</span> <span class="title class_">UserService</span>();</span><br><span class="line">    user.<span class="title function_">createUser</span>();</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(user.<span class="title function_">getUsers</span>());</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>();</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(</span><br><span class="line">        <span class="string">&#x27;-----------------------示例11:执行完毕-----------------------&#x27;</span>,</span><br><span class="line">    );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h1 id="02-核心概念"><a href="#02-核心概念" class="headerlink" title="02 核心概念"></a>02 核心概念</h1><p>官方文档：<a target="_blank" rel="noopener" href="https://nest.nodejs.cn/">https://nest.nodejs.cn/</a></p>
<p>提前安装以下后</p>
<ul>
<li>lodash 一个通用的JS函数工具库</li>
<li>class-validator 用于类的验证，本节主要结合DTO对请求数据进行验证</li>
<li>class-transformer 序列化响应数据，本节用于结合class-validator进行序列化</li>
<li>@nestjs/swagger nestjs的openapi支持库，本节只使用里面的<code>PartialType</code>函数（用于去除IDE报错）</li>
</ul>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm add lodash <span class="keyword">class</span>-validator <span class="keyword">class</span>-transformer <span class="meta">@nestjs</span>/swagger</span><br></pre></td></tr></table></figure>

<h2 id="更换http驱动"><a href="#更换http驱动" class="headerlink" title="更换http驱动"></a>更换http驱动</h2><p>使用fastify代替默认的express，以提高应用的http响应速度，并把访问地址改成<code>0.0.0.0</code>以便外网访问<br>先安装fastify驱动</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm add @nestjs/platform-fastify</span><br></pre></td></tr></table></figure>

<p>src/main.ts</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">bootstrap</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> app = <span class="keyword">await</span> <span class="title class_">NestFactory</span>.<span class="property">create</span>&lt;<span class="title class_">NestFastifyApplication</span>&gt;(</span><br><span class="line">        <span class="title class_">AppModule</span>,</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">FastifyAdapter</span>(),</span><br><span class="line">    );</span><br><span class="line">    <span class="comment">// 指定url前缀</span></span><br><span class="line">    app.<span class="title function_">setGlobalPrefix</span>(<span class="string">&#x27;api&#x27;</span>);</span><br><span class="line">    <span class="comment">// 允许跨域</span></span><br><span class="line">    app.<span class="title function_">enableCors</span>();</span><br><span class="line">    <span class="keyword">await</span> app.<span class="title function_">listen</span>(<span class="number">3000</span>, <span class="string">&#x27;0.0.0.0&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>调试</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run start:dev</span><br></pre></td></tr></table></figure>

<h2 id="控制器详解"><a href="#控制器详解" class="headerlink" title="控制器详解"></a>控制器详解</h2><h3 id="控制器定义"><a href="#控制器定义" class="headerlink" title="控制器定义"></a>控制器定义</h3><p>控制器的目的是接收应用的特定请求。 <strong>routing</strong> 机制控制哪个控制器接收哪些请求。</p>
<p>使用<code>@Controller(&#39;路由路径&#39;)</code>来指定控制器</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/modules/forum/controllers/post.controller.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Controller</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@nestjs/common&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span>(<span class="string">&#x27;posts&#x27;</span>)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">PostController</span> &#123;&#125;</span><br></pre></td></tr></table></figure>

<p>请求路径：<a target="_blank" rel="noopener" href="http://localhost:3000/posts">http://localhost:3000/posts</a></p>
<h3 id="请求方法"><a href="#请求方法" class="headerlink" title="请求方法"></a>请求方法</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Get</span>         <span class="comment">//用于获取数据</span></span><br><span class="line"><span class="meta">@Post</span>     <span class="comment">//用于新增数据</span></span><br><span class="line"><span class="meta">@Patch</span>    <span class="comment">//用于更新部分数据</span></span><br><span class="line"><span class="meta">@Put</span>        <span class="comment">//用于更新全部数据</span></span><br><span class="line"><span class="meta">@Delete</span>    <span class="comment">//用于删除数据</span></span><br><span class="line"><span class="meta">@Options</span><span class="comment">//用于对cors的跨域预检(一般用不到)</span></span><br><span class="line"><span class="meta">@Head</span>        <span class="comment">//用于自定义请求头,常用于下载,导出excel文件等</span></span><br></pre></td></tr></table></figure>

<h3 id="请求对象"><a href="#请求对象" class="headerlink" title="请求对象"></a>请求对象</h3><p>可以通过以下装饰器获取需要的请求对象</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Request</span>(), <span class="meta">@Req</span>()  <span class="comment">//请求数据</span></span><br><span class="line"><span class="meta">@Response</span>(), <span class="meta">@Res</span>() <span class="comment">//响应数据</span></span><br><span class="line"><span class="meta">@Next</span>()                          <span class="comment">//执行下一个中间件(一般用不到)</span></span><br><span class="line"><span class="meta">@Session</span>()                  <span class="comment">//session对象(一般用不到)</span></span><br><span class="line"><span class="meta">@Param</span>(key?: <span class="built_in">string</span>)<span class="comment">//获取url中的params参数，比如 posts/1</span></span><br><span class="line"><span class="meta">@Body</span>(key?: <span class="built_in">string</span>) <span class="comment">//请求主体数据,一般结合DTO使用,用于新增或修改数据</span></span><br><span class="line"><span class="meta">@Query</span>(key?: <span class="built_in">string</span>)<span class="comment">//获取url中的查询数据，比如 posts?page=1</span></span><br><span class="line"><span class="meta">@HttpCode</span>(<span class="attr">statusCode</span>: <span class="built_in">number</span>) <span class="comment">//指定响应码，比如 @HttpCode(200)</span></span><br><span class="line"><span class="meta">@Redirect</span>(<span class="attr">url</span>:<span class="built_in">string</span>,<span class="attr">statusCode</span>:<span class="built_in">number</span>) <span class="comment">//跳转到其它url，比如 @Redirect(&#x27;/ccc&#x27;,301)</span></span><br></pre></td></tr></table></figure>

<p>示例：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span>(<span class="string">&#x27;posts&#x27;</span>)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">PostController</span> &#123;</span><br><span class="line">      <span class="meta">@Get</span>(<span class="string">&#x27;:id&#x27;</span>)</span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">show</span>(<span class="params"><span class="meta">@Param</span>(<span class="string">&#x27;id&#x27;</span>) id: <span class="built_in">number</span></span>) &#123;&#125;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>

<h3 id="DTO与数据验证"><a href="#DTO与数据验证" class="headerlink" title="DTO与数据验证"></a>DTO与数据验证</h3><blockquote>
<p>DTO是用于对请求数据结构进行定义的一个类，常用于对<code>body</code>,<code>query</code>等请求数据进行验证。</p>
</blockquote>
<p>概念：</p>
<ul>
<li><p>DTO是数据传输对象（Data Transfer Object）的缩写。通常与领域模型（Domain Model）或实体对象（Entity）之间进行转换。</p>
</li>
<li><p>常用的验证库为<code>class-validator</code></p>
</li>
<li><p>对于<code>body</code>和<code>query</code>数据的验证一般使用dto+<code>ValidationPipe</code>这个预定义管道</p>
</li>
<li><p>对于<code>param</code>数据的验证一般直接使用预定义或者自定义的非全局管道,比如<code>ParseUUIDPipe</code></p>
</li>
</ul>
<h4 id="class-validator"><a href="#class-validator" class="headerlink" title="class-validator"></a>class-validator</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm add class-validator</span><br></pre></td></tr></table></figure>

<p>class-validator提供了一组装饰器，你可以将其应用于DTO类的字段上，以定义验证规则。这些装饰器可以用于验证字符串、数字、日期等各种类型的数据，并提供了丰富的验证选项。</p>
<p>以下是一些常用的class-validator装饰器：</p>
<ul>
<li>@IsString()：验证字段是否为字符串类型。</li>
<li>@IsNumber()：验证字段是否为数字类型。</li>
<li>@IsBoolean()：验证字段是否为布尔类型。</li>
<li>@IsEmail()：验证字段是否为有效的电子邮件地址。</li>
<li>@IsNotEmpty()：验证字段是否非空。</li>
<li>@Min()：验证字段是否大于或等于指定的最小值。</li>
<li>@Max()：验证字段是否小于或等于指定的最大值。</li>
<li>@Length()：验证字段的长度是否在指定范围内。</li>
<li>@Matches()：验证字段是否匹配指定的正则表达式模式。</li>
</ul>
<p>示例：POST <a target="_blank" rel="noopener" href="http://localhost:3000/api/posts">http://localhost:3000/api/posts</a></p>
<p>src/modules/forum/dtos/create-post.dto.ts</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Injectable</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@nestjs/common&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">IsNotEmpty</span>, <span class="title class_">IsOptional</span>, <span class="title class_">MaxLength</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;class-validator&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Injectable</span>()</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">CreatePostDto</span> &#123;</span><br><span class="line">    <span class="meta">@MaxLength</span>(<span class="number">255</span>, &#123;</span><br><span class="line">        <span class="attr">always</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">message</span>: <span class="string">&#x27;帖子标题长度最大为$constraint1&#x27;</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="meta">@IsNotEmpty</span>(&#123; <span class="attr">groups</span>: [<span class="string">&#x27;create&#x27;</span>], <span class="attr">message</span>: <span class="string">&#x27;帖子标题必须填写&#x27;</span> &#125;)</span><br><span class="line">    <span class="meta">@IsOptional</span>(&#123; <span class="attr">groups</span>: [<span class="string">&#x27;update&#x27;</span>] &#125;)</span><br><span class="line">    title!: <span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@IsNotEmpty</span>(&#123; <span class="attr">groups</span>: [<span class="string">&#x27;create&#x27;</span>], <span class="attr">message</span>: <span class="string">&#x27;帖子内容必须填写&#x27;</span> &#125;)</span><br><span class="line">    <span class="meta">@IsOptional</span>(&#123; <span class="attr">groups</span>: [<span class="string">&#x27;update&#x27;</span>] &#125;)</span><br><span class="line">    body!: <span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@MaxLength</span>(<span class="number">500</span>, &#123;</span><br><span class="line">        <span class="attr">always</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">message</span>: <span class="string">&#x27;帖子描述长度最大为$constraint1&#x27;</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="meta">@IsOptional</span>(&#123; <span class="attr">always</span>: <span class="literal">true</span> &#125;)</span><br><span class="line">    summary?: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注：</p>
<ul>
<li><code>!</code> 非空断言符，某个属性或变量一定会有值，不会为<code>null</code>或<code>undefined</code>。</li>
<li><code>?</code> 可选属性操作符，用于定义属性或参数是可选的，可以为<code>undefined</code>或省略。</li>
</ul>
<p>src/app.controller.ts</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Body</span>, <span class="title class_">Controller</span>, <span class="title class_">Get</span>, <span class="title class_">Param</span>, <span class="title class_">ParseIntPipe</span>, <span class="title class_">Post</span>, <span class="title class_">ValidationPipe</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@nestjs/common&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">AppService</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./app.service&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">CreatePostDto</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./modules/forum/dtos/create-post.dto&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span>(<span class="string">&#x27;posts&#x27;</span>)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">AppController</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"><span class="keyword">private</span> <span class="keyword">readonly</span> appService: AppService</span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Get</span>(<span class="string">&#x27;:id&#x27;</span>)</span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">show</span>(<span class="params"><span class="meta">@Param</span>(<span class="string">&#x27;id&#x27;</span>, <span class="keyword">new</span> ParseIntPipe()) id: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Post</span>()</span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">store</span>(<span class="params"></span></span><br><span class="line"><span class="params">        <span class="comment">// 将请求体中的数据绑定到data参数上</span></span></span><br><span class="line"><span class="params">        <span class="meta">@Body</span>(</span></span><br><span class="line"><span class="params">            <span class="comment">// 执行数据验证</span></span></span><br><span class="line"><span class="params">            <span class="keyword">new</span> ValidationPipe(&#123;</span></span><br><span class="line"><span class="params">                transform: <span class="literal">true</span>, // 在验证之前自动转换传入的数据类型</span></span><br><span class="line"><span class="params">                forbidUnknownValues: <span class="literal">true</span>, // 如果请求体中包含未知的属性，则会抛出错误</span></span><br><span class="line"><span class="params">                validationError: &#123; target: <span class="literal">false</span> &#125;, // 在验证失败时不返回整个目标对象，而只返回验证错误信息</span></span><br><span class="line"><span class="params">                groups: [<span class="string">&#x27;create&#x27;</span>], // 只对指定的验证组（<span class="string">&#x27;create&#x27;</span>）进行验证</span></span><br><span class="line"><span class="params">            &#125;),</span></span><br><span class="line"><span class="params">        )</span></span><br><span class="line"><span class="params">        data: CreatePostDto, <span class="comment">// data 接收经过验证后的数据</span></span></span><br><span class="line"><span class="params">    </span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注：</p>
<ul>
<li>ValidationPipe：数据验证管道</li>
<li>ParseIntPipe：管道，作为装饰器的参数来指定将参数解析为整数类型</li>
</ul>
<h2 id="提供者-Provider"><a href="#提供者-Provider" class="headerlink" title="提供者 Provider"></a>提供者 Provider</h2><blockquote>
<p>提供者就是通过<strong>类型提示</strong>或者<strong>标识符</strong>的方式，使某个类或函数以依赖注入的方式在其它需要使用到它的地方进行实例化</p>
</blockquote>
<p>Provider是Nestjs，Laravel，Symfony以及Spring,Angular等现代web框架的核心所在</p>
<h4 id="基本用法"><a href="#基本用法" class="headerlink" title="基本用法"></a>基本用法</h4><p>在nestjs中如果要使一个类变成提供者，需要在其顶部添加<code>@Injectale()</code>装饰器：</p>
<p>post.services.ts</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Injectable</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@nestjs/common&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Injectable</span>()</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">PostService</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> ccc = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">findAll</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">ccc</span>++;</span><br><span class="line">        <span class="keyword">return</span> &#123; <span class="attr">ccc</span>: <span class="variable language_">this</span>.<span class="property">ccc</span> &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>使用：app.controller.ts</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span>(<span class="string">&#x27;posts&#x27;</span>)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">AppController</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span></span><br><span class="line"><span class="params">        <span class="keyword">private</span> <span class="keyword">readonly</span> postService: PostService,</span></span><br><span class="line"><span class="params">    </span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Get</span>()</span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">index</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">postService</span>.<span class="title function_">findAll</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>

<h4 id="注册与导出"><a href="#注册与导出" class="headerlink" title="注册与导出"></a>注册与导出</h4><p>提供者需要在模块元元素的<code>providers</code>中注册才可以被本模块的其它类注入，需要在<code>exports</code>中导出后才能被其它模块调用：</p>
<p>src/app.module.ts</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Module</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@nestjs/common&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">AppController</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./app.controller&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">AppService</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./app.service&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">PostService</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./post.services&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Module</span>(&#123;</span><br><span class="line">    <span class="attr">imports</span>: [],</span><br><span class="line">    <span class="attr">controllers</span>: [<span class="title class_">AppController</span>],</span><br><span class="line">    <span class="attr">providers</span>: [<span class="title class_">AppService</span>, <span class="title class_">PostService</span>],</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">AppModule</span> &#123;&#125;</span><br></pre></td></tr></table></figure>

<h4 id="自定义提供者"><a href="#自定义提供者" class="headerlink" title="自定义提供者"></a>自定义提供者</h4><ul>
<li>值提供者: 使用useValue来构建一个提供者</li>
<li>字符串提供者: 使用字符串，比如CONNECT来构建一个提供者</li>
<li>类映射提供者: 使用一个类映射另一个类来构建一个提供者</li>
<li>构造器提供者: 使用factory来构建一个提供者</li>
<li>别名提供者: 使用useExisting来为一个提供者指定一个别名</li>
<li>异步提供者: 使用async关键字+factory构建异步提供者</li>
</ul>
<p>src/app.module.ts</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> exampleTest = &#123;</span><br><span class="line">    <span class="attr">useValue</span>: <span class="function">() =&gt;</span> <span class="string">&#x27;useValue提供者&#x27;</span>,</span><br><span class="line">    <span class="attr">useAlias</span>: <span class="function">() =&gt;</span> <span class="string">&#x27;别名提供者&#x27;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> example = <span class="keyword">new</span> <span class="title class_">ExampleProvider</span>();</span><br><span class="line"><span class="meta">@Module</span>(&#123;</span><br><span class="line">    <span class="attr">controllers</span>: [<span class="title class_">PostController</span>, <span class="title class_">ExampleController</span>],</span><br><span class="line">    <span class="attr">providers</span>: [</span><br><span class="line">        <span class="title class_">PostService</span>,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">provide</span>: <span class="title class_">ExampleProvider</span>,</span><br><span class="line">            <span class="attr">useValue</span>: exampleTest,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">provide</span>: <span class="string">&#x27;ID-EXAMPLE&#x27;</span>,</span><br><span class="line">            <span class="attr">useValue</span>: example,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">provide</span>: <span class="title class_">OneProvider</span>,</span><br><span class="line">            <span class="attr">useClass</span>: <span class="title class_">AnotherProvider</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">provide</span>: <span class="string">&#x27;FACTORY-EXAMPLE&#x27;</span>,</span><br><span class="line">            <span class="title function_">useFactory</span>(<span class="params">one: OneProvider</span>) &#123;</span><br><span class="line">                <span class="keyword">const</span> factory = <span class="keyword">new</span> <span class="title class_">Factory</span>(one);</span><br><span class="line">                <span class="keyword">return</span> factory;</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">inject</span>: [<span class="title class_">OneProvider</span>],</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">provide</span>: <span class="string">&#x27;ALIAS-EXAMPLE&#x27;</span>,</span><br><span class="line">            <span class="attr">useExisting</span>: <span class="title class_">ExampleProvider</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">provide</span>: <span class="string">&#x27;ASYNC-EXAMPLE&#x27;</span>,</span><br><span class="line">            <span class="attr">useFactory</span>: <span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">                <span class="keyword">const</span> factory = <span class="keyword">new</span> <span class="title class_">Factory</span>(<span class="keyword">new</span> <span class="title class_">OneProvider</span>());</span><br><span class="line">                <span class="keyword">return</span> factory.<span class="title function_">getPromise</span>();</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">exports</span>: [<span class="title class_">PostService</span>],</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">ForumModule</span> &#123;&#125;</span><br></pre></td></tr></table></figure>

<p>调用：example.controller.ts</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span>(<span class="string">&#x27;examples&#x27;</span>)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">ExampleController</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span></span><br><span class="line"><span class="params">        <span class="keyword">private</span> valExp: ExampleProvider,</span></span><br><span class="line"><span class="params">        <span class="meta">@Inject</span>(<span class="string">&#x27;ID-EXAMPLE&#x27;</span>) <span class="keyword">private</span> idExp: ExampleProvider,</span></span><br><span class="line"><span class="params">        <span class="meta">@Inject</span>(<span class="string">&#x27;FACTORY-EXAMPLE&#x27;</span>) <span class="keyword">private</span> ftExp: Factory,</span></span><br><span class="line"><span class="params">        <span class="meta">@Inject</span>(<span class="string">&#x27;ALIAS-EXAMPLE&#x27;</span>) <span class="keyword">private</span> asExp: ExampleProvider,</span></span><br><span class="line"><span class="params">        <span class="meta">@Inject</span>(<span class="string">&#x27;ASYNC-EXAMPLE&#x27;</span>) <span class="keyword">private</span> acExp: OneProvider,</span></span><br><span class="line"><span class="params">    </span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Get</span>(<span class="string">&#x27;value&#x27;</span>)</span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">useValue</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">valExp</span>.<span class="title function_">useValue</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Get</span>(<span class="string">&#x27;id&#x27;</span>)</span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">useId</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">idExp</span>.<span class="title function_">useId</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Get</span>(<span class="string">&#x27;factory&#x27;</span>)</span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">useFactory</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">ftExp</span>.<span class="title function_">getContent</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Get</span>(<span class="string">&#x27;alias&#x27;</span>)</span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">useAlias</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">asExp</span>.<span class="title function_">useAlias</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Get</span>(<span class="string">&#x27;async&#x27;</span>)</span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">useAsync</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">acExp</span>.<span class="title function_">useAsync</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="循环依赖"><a href="#循环依赖" class="headerlink" title="循环依赖"></a>循环依赖</h4><p>如果两个提供者之间互相依赖，可以通过注入<code>forwardRef</code>来实现</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/modules/forum/providers/circular-first.provider.ts</span></span><br><span class="line"><span class="meta">@Injectable</span>()</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">CircularFirstProvider</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span></span><br><span class="line"><span class="params">        <span class="meta">@Inject</span>(forwardRef(() =&gt; CircularSecondProvider))</span></span><br><span class="line"><span class="params">        <span class="keyword">protected</span> second: CircularSecondProvider,</span></span><br><span class="line"><span class="params">    </span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">first</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">`循环依赖1<span class="subst">$&#123;<span class="variable language_">this</span>.second.second()&#125;</span>`</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// src/modules/forum/providers/circular-second.provider.ts</span></span><br><span class="line"><span class="meta">@Injectable</span>()</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">CircularSecondProvider</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span></span><br><span class="line"><span class="params">        <span class="meta">@Inject</span>(forwardRef(() =&gt; CircularFirstProvider))</span></span><br><span class="line"><span class="params">        <span class="keyword">protected</span> first: CircularFirstProvider,</span></span><br><span class="line"><span class="params">    </span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">second</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">`循环依赖2`</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// src/modules/forum/controllers/example.controller.ts</span></span><br><span class="line"><span class="meta">@Controller</span>(<span class="string">&#x27;examples&#x27;</span>)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">ExampleController</span> &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="meta">@Get</span>(<span class="string">&#x27;circular&#x27;</span>)</span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">useCircular</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">circular</span>.<span class="title function_">first</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>模块间也可以循环依赖:</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Module</span>(&#123;</span><br><span class="line">  <span class="attr">imports</span>: [<span class="title function_">forwardRef</span>(<span class="function">() =&gt;</span> <span class="title class_">CatsModule</span>)],</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">CommonModule</span> &#123;&#125;</span><br></pre></td></tr></table></figure>

<h4 id="注入范围"><a href="#注入范围" class="headerlink" title="注入范围"></a>注入范围</h4><ul>
<li>DEFAULT: 默认的单例注入，每次请求都是使用同一个实例</li>
<li>REQUEST: 每次请求创建一个新的提供者实例，并且该实例在这次请求内被所有调用者所共享，请求完毕自动销毁</li>
<li>TRANSIENT：每次被使用者注入该提供者时都会创建一个新的实例，换新的请求后就不变    </li>
</ul>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Injectable</span>, <span class="title class_">Scope</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@nestjs/common&#x27;</span>;</span><br><span class="line"><span class="meta">@Injectable</span>(&#123; <span class="attr">scope</span>: <span class="title class_">Scope</span>.<span class="property">REQUEST</span> &#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">CatsService</span> &#123;&#125;</span><br></pre></td></tr></table></figure>

<h2 id="模块"><a href="#模块" class="headerlink" title="模块"></a>模块</h2><p>模块是一个功能的集合，比如<code>user</code>,<code>forum</code>等，包含了各自控制器，服务等等</p>
<h3 id="共享模块"><a href="#共享模块" class="headerlink" title="共享模块"></a>共享模块</h3><p>上面的forum如果要调用<code>user</code>模块的提供者，必须先在<code>user</code>中使用<code>exports</code>导出，然后在<code>forum</code>模块中使用<code>imports</code>导入</p>
<p>src/modules/user/user.module.ts</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Module</span>(&#123;</span><br><span class="line">    <span class="attr">providers</span>: [<span class="title class_">UserService</span>],</span><br><span class="line">    <span class="attr">exports</span>: [<span class="title class_">UserService</span>],</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">UserModule</span> &#123;&#125;</span><br></pre></td></tr></table></figure>

<p>src/modules/forum/forum.module.ts</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Module</span>(&#123;</span><br><span class="line">    <span class="attr">imports</span>: [<span class="title class_">UserModule</span>],</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="全局模块"><a href="#全局模块" class="headerlink" title="全局模块"></a>全局模块</h3><ul>
<li>静态模块通过<code>@Global()</code>装饰器启用为全局模块</li>
<li>动态模块使用<code>isGlobal:true</code>启用全局模块</li>
</ul>
<p>全局模块启用后，只要在中心模块<code>AppModule</code>导入，其它模块就能使用啦    </p>
<p>common.service.ts</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Global</span>()</span><br><span class="line"><span class="meta">@Module</span>(&#123;</span><br><span class="line">    <span class="attr">providers</span>: [<span class="title class_">CommonService</span>],</span><br><span class="line">    <span class="attr">exports</span>: [<span class="title class_">CommonService</span>],</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">CoreModule</span> &#123;&#125;</span><br></pre></td></tr></table></figure>

<p>src/app.module.ts</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Module</span>(&#123;</span><br><span class="line">    <span class="attr">imports</span>: [<span class="title class_">CoreModule</span>, <span class="title class_">ForumModule</span>, <span class="title class_">UserModule</span>],</span><br><span class="line">    <span class="attr">controllers</span>: [<span class="title class_">AppController</span>],</span><br><span class="line">    <span class="attr">providers</span>: [<span class="title class_">AppService</span>],</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">AppModule</span> &#123;&#125;</span><br></pre></td></tr></table></figure>

<h3 id="动态模块"><a href="#动态模块" class="headerlink" title="动态模块"></a>动态模块</h3><p>如果要在模块导入时传入参数，则需要定义动态模块</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/modules/core/services/common.service.ts</span></span><br><span class="line"><span class="meta">@Injectable</span>()</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">CommonService</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"><span class="keyword">private</span> options: &#123; title: <span class="built_in">string</span> &#125;</span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">getGlobalValue</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">options</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// src/modules/core/core.module.ts</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">CoreModule</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="title function_">forRoot</span>(<span class="attr">options</span>: &#123; <span class="attr">title</span>: <span class="built_in">string</span> &#125;): <span class="title class_">DynamicModule</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">module</span>: <span class="title class_">CoreModule</span>,</span><br><span class="line">            <span class="attr">global</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">providers</span>: [</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">provide</span>: <span class="title class_">CommonService</span>,</span><br><span class="line">                    <span class="title function_">useFactory</span>(<span class="params"></span>) &#123;</span><br><span class="line">                        <span class="keyword">const</span> common = <span class="keyword">new</span> <span class="title class_">CommonService</span>(options);</span><br><span class="line">                        <span class="keyword">return</span> common;</span><br><span class="line">                    &#125;,</span><br><span class="line">                &#125;,</span><br><span class="line">            ],</span><br><span class="line">            <span class="attr">exports</span>: [<span class="title class_">CommonService</span>]</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// src/app.module.ts</span></span><br><span class="line"><span class="meta">@Module</span>(&#123;</span><br><span class="line">    <span class="attr">imports</span>: [</span><br><span class="line">        <span class="title class_">CoreModule</span>.<span class="title function_">forRoot</span>(&#123; <span class="attr">title</span>: <span class="string">&#x27;全局模块测试&#x27;</span> &#125;),</span><br><span class="line">        <span class="title class_">ForumModule</span>,</span><br><span class="line">        <span class="title class_">UserModule</span>,</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">controllers</span>: [<span class="title class_">AppController</span>],</span><br><span class="line">    <span class="attr">providers</span>: [<span class="title class_">AppService</span>],</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">AppModule</span> &#123;&#125;</span><br></pre></td></tr></table></figure>


      
       <hr><span style="font-style: italic;color: gray;"> 转载请注明来源，欢迎对文章中的引用来源进行考证，欢迎指出任何有错误或不够清晰的表达。可以在下面评论区评论，也可以邮件至 jaytp@qq.com </span>
    </div>
</article>


<p>
    <a  class="dashang" onclick="dashangToggle()">赏</a>
</p>






    




    </div>
    <div class="copyright">
        <p class="footer-entry">
    ©2016-2020 Yelog
</p>
<p class="footer-entry">Built with <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/yelog/hexo-theme-3-hexo" target="_blank">3-hexo</a> theme</p>

    </div>
    <div class="full-toc">
        <button class="full" data-title="切换全屏 快捷键 s"><span class="min "></span></button>
<a class="" id="rocket" ></a>

    </div>
</div>

<div class="hide_box" onclick="dashangToggle()"></div>
<div class="shang_box">
    <a class="shang_close"  onclick="dashangToggle()">×</a>
    <div class="shang_tit">
        <p>喜欢就点赞,疼爱就打赏</p>
    </div>
    <div class="shang_payimg">
        <div class="pay_img">
            <img src="/img/alipay.jpg" class="alipay" title="扫码支持">
            <img src="/img/weixin.jpg" class="weixin" title="扫码支持">
        </div>
    </div>
    <div class="shang_payselect">
        <span><label><input type="radio" name="pay" checked value="alipay">支付宝</label></span><span><label><input type="radio" name="pay" value="weixin">微信</label></span>
    </div>
</div>


</body>
<script src="/js/jquery.pjax.js?v=1.1.0" ></script>

<script src="/js/script.js?v=1.1.0" ></script>
<script>
    var img_resize = 'default';
    function initArticle() {
        /*渲染对应的表格样式*/
        
            $("#post .pjax table").addClass("green_title");
        

        /*渲染打赏样式*/
        
        $("input[name=pay]").on("click", function () {
            if($("input[name=pay]:checked").val()=="weixin"){
                $(".shang_box .shang_payimg .pay_img").addClass("weixin_img");
            } else {
                $(".shang_box .shang_payimg .pay_img").removeClass("weixin_img");
            }
        })
        

        /*高亮代码块行号*/
        

        /*访问数量*/
        
        $.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js");
        

        /*代码高亮，行号对齐*/
        $('.pre-numbering').css('line-height',$('.has-numbering').css('line-height'));

        
        
    }

    /*打赏页面隐藏与展示*/
    
    function dashangToggle() {
        $(".shang_box").fadeToggle();
        $(".hide_box").fadeToggle();
    }
    

</script>

<!--加入行号的高亮代码块样式-->

<!--自定义样式设置-->
<style>
    
    
    .nav {
        width: 542px;
    }
    .nav.fullscreen {
        margin-left: -542px;
    }
    .nav-left {
        width: 120px;
    }
    
    
    @media screen and (max-width: 1468px) {
        .nav {
            width: 492px;
        }
        .nav.fullscreen {
            margin-left: -492px;
        }
        .nav-left {
            width: 100px;
        }
    }
    
    
    @media screen and (max-width: 1024px) {
        .nav {
            width: 492px;
            margin-left: -492px
        }
        .nav.fullscreen {
            margin-left: 0;
        }
    }
    
    @media screen and (max-width: 426px) {
        .nav {
            width: 100%;
        }
        .nav-left {
            width: 100%;
        }
    }
    
    
    .nav-right .title-list nav a .post-title, .nav-right .title-list #local-search-result a .post-title {
        color: #383636;
    }
    
    
    .nav-right .title-list nav a .post-date, .nav-right .title-list #local-search-result a .post-date {
        color: #5e5e5f;
    }
    
    
    .nav-right nav a.hover, #local-search-result a.hover{
        background-color: #e2e0e0;
    }
    
    

    /*列表样式*/
    

    /* 背景图样式 */
    
    


    /*引用块样式*/
    

    /*文章列表背景图*/
    

    
</style>







</html>
